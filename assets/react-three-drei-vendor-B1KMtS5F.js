function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/troika-three-text.esm-DRjhaUTW.js","assets/three-vendor-Hsu1XpJN.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{a as hr,r as g}from"./react-vendor-D8fagYP-.js";import{u as j,a as we,_ as $,c as xn,s as ts,p as ur,b as dr,e as As,d as fs,f as Ar,g as fr,h as mr}from"./react-three-fiber-vendor-B7wf-OD6.js";import{V as L,D as Gn,O as ft,P as ms,c as ie,j as Ct,C as Ce,Q as Te,k as pe,l as mt,E as pr,m as bn,F as ps,n as Br,o as Cr,p as Ze,q as bt,r as Be,B as Bs,s as _r,t as ss,u as Hn,v as Un,w as Ln,x as wn,y as ns,z as Sn,G as gr,H as Pn,I as Cs,J as Le,K as ut,X as Er,Y as yr,Z as vr,_ as Ye,$ as Re,a0 as Tr,a1 as dt,a2 as Mr,a3 as Fr,a4 as Dr,a5 as At,a6 as _s,a7 as rs,a8 as Rr,M as Lt,a9 as Or,aa as Jn,ab as Ir,ac as xr,ad as Gr,ae as br,af as Hr,ag as Ur,ah as wt,ai as gs,aj as Lr,ak as Kn,al as wr,am as W,an as Sr,ao as Pr,ap as Jr,aq as Kr,ar as kr,as as Nr,at as Qr,au as Yr,T as Os,av as Xr,aw as kn,ax as jr,ay as Zr,az as zr,aA as ve,aB as Vr,aC as me,aD as Wr,aE as qr,aF as Rt,a as $r,aG as ei,S as ti,aH as St}from"./three-vendor-Hsu1XpJN.js";var Is={},Nn,xs=hr;Nn=Is.createRoot=xs.createRoot,Is.hydrateRoot=xs.hydrateRoot;const si="modulepreload",ni=function(n){return"/portal/"+n},Gs={},ri=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));r=Promise.all(t.map(c=>{if(c=ni(c),c in Gs)return;Gs[c]=!0;const l=c.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!s)for(let A=o.length-1;A>=0;A--){const B=o[A];if(B.href===c&&(!l||B.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":si,l||(u.as="script",u.crossOrigin=""),u.href=c,a&&u.setAttribute("nonce",a),document.head.appendChild(u),l)return new Promise((A,B)=>{u.addEventListener("load",A),u.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${c}`)))})}))}return r.then(()=>e()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},pt=new L,Es=new L,ii=new L,bs=new ie;function oi(n,e,t){const s=pt.setFromMatrixPosition(n.matrixWorld);s.project(e);const r=t.width/2,o=t.height/2;return[s.x*r+r,-(s.y*o)+o]}function ai(n,e){const t=pt.setFromMatrixPosition(n.matrixWorld),s=Es.setFromMatrixPosition(e.matrixWorld),r=t.sub(s),o=e.getWorldDirection(ii);return r.angleTo(o)>Math.PI/2}function ci(n,e,t,s){const r=pt.setFromMatrixPosition(n.matrixWorld),o=r.clone();o.project(e),bs.set(o.x,o.y),t.setFromCamera(bs,e);const i=t.intersectObjects(s,!0);if(i.length){const a=i[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function li(n,e){if(e instanceof ft)return e.zoom;if(e instanceof ms){const t=pt.setFromMatrixPosition(n.matrixWorld),s=Es.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,o=t.distanceTo(s);return 1/(2*Math.tan(r/2)*o)}else return 1}function hi(n,e,t){if(e instanceof ms||e instanceof ft){const s=pt.setFromMatrixPosition(n.matrixWorld),r=Es.setFromMatrixPosition(e.matrixWorld),o=s.distanceTo(r),i=(t[1]-t[0])/(e.far-e.near),a=t[1]-i*e.far;return Math.round(i*o+a)}}const is=n=>Math.abs(n)<1e-10?0:n;function Qn(n,e,t=""){let s="matrix3d(";for(let r=0;r!==16;r++)s+=is(e[r]*n.elements[r])+(r!==15?",":")");return t+s}const ui=(n=>e=>Qn(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),di=(n=>(e,t)=>Qn(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Ai(n){return n&&typeof n=="object"&&"current"in n}const ya=g.forwardRef(({children:n,eps:e=.001,style:t,className:s,prepend:r,center:o,fullscreen:i,portal:a,distanceFactor:c,sprite:l=!1,transform:d=!1,occlude:h,onOcclude:u,castShadow:A,receiveShadow:B,material:m,geometry:p,zIndexRange:f=[16777271,0],calculatePosition:_=oi,as:y="div",wrapperClass:C,pointerEvents:T="auto",...v},M)=>{const{gl:F,camera:R,scene:x,size:I,raycaster:S,events:P,viewport:Q}=j(),[H]=g.useState(()=>document.createElement(y)),oe=g.useRef(),X=g.useRef(null),ae=g.useRef(0),_e=g.useRef([0,0]),z=g.useRef(null),V=g.useRef(null),ge=(a==null?void 0:a.current)||P.connected||F.domElement.parentNode,ce=g.useRef(null),ze=g.useRef(!1),ee=g.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&Ai(h[0]),[h]);g.useLayoutEffect(()=>{const N=F.domElement;h&&h==="blending"?(N.style.zIndex=`${Math.floor(f[0]/2)}`,N.style.position="absolute",N.style.pointerEvents="none"):(N.style.zIndex=null,N.style.position=null,N.style.pointerEvents=null)},[h]),g.useLayoutEffect(()=>{if(X.current){const N=oe.current=Nn(H);if(x.updateMatrixWorld(),d)H.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const b=_(X.current,R,I);H.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${b[0]}px,${b[1]}px,0);transform-origin:0 0;`}return ge&&(r?ge.prepend(H):ge.appendChild(H)),()=>{ge&&ge.removeChild(H),N.unmount()}}},[ge,d]),g.useLayoutEffect(()=>{C&&(H.className=C)},[C]);const te=g.useMemo(()=>d?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:o?"translate3d(-50%,-50%,0)":"none",...i&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...t},[t,o,i,I,d]),ue=g.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);g.useLayoutEffect(()=>{if(ze.current=!1,d){var N;(N=oe.current)==null||N.render(g.createElement("div",{ref:z,style:te},g.createElement("div",{ref:V,style:ue},g.createElement("div",{ref:M,className:s,style:t,children:n}))))}else{var b;(b=oe.current)==null||b.render(g.createElement("div",{ref:M,style:te,className:s,children:n}))}});const J=g.useRef(!0);we(N=>{if(X.current){R.updateMatrixWorld(),X.current.updateWorldMatrix(!0,!1);const b=d?_e.current:_(X.current,R,I);if(d||Math.abs(ae.current-R.zoom)>e||Math.abs(_e.current[0]-b[0])>e||Math.abs(_e.current[1]-b[1])>e){const Oe=ai(X.current,R);let Ee=!1;ee&&(Array.isArray(h)?Ee=h.map(Ie=>Ie.current):h!=="blending"&&(Ee=[x]));const Ve=J.current;if(Ee){const Ie=ci(X.current,R,S,Ee);J.current=Ie&&!Oe}else J.current=!Oe;Ve!==J.current&&(u?u(!J.current):H.style.display=J.current?"block":"none");const Bt=Math.floor(f[0]/2),nr=h?ee?[f[0],Bt]:[Bt-1,0]:f;if(H.style.zIndex=`${hi(X.current,R,nr)}`,d){const[Ie,Ds]=[I.width/2,I.height/2],Ut=R.projectionMatrix.elements[5]*Ds,{isOrthographicCamera:Rs,top:rr,left:ir,bottom:or,right:ar}=R,cr=ui(R.matrixWorldInverse),lr=Rs?`scale(${Ut})translate(${is(-(ar+ir)/2)}px,${is((rr+or)/2)}px)`:`translateZ(${Ut}px)`;let xe=X.current.matrixWorld;l&&(xe=R.matrixWorldInverse.clone().transpose().copyPosition(xe).scale(X.current.scale),xe.elements[3]=xe.elements[7]=xe.elements[11]=0,xe.elements[15]=1),H.style.width=I.width+"px",H.style.height=I.height+"px",H.style.perspective=Rs?"":`${Ut}px`,z.current&&V.current&&(z.current.style.transform=`${lr}${cr}translate(${Ie}px,${Ds}px)`,V.current.style.transform=di(xe,1/((c||10)/400)))}else{const Ie=c===void 0?1:li(X.current,R)*c;H.style.transform=`translate3d(${b[0]}px,${b[1]}px,0) scale(${Ie})`}_e.current=b,ae.current=R.zoom}}if(!ee&&ce.current&&!ze.current)if(d){if(z.current){const b=z.current.children[0];if(b!=null&&b.clientWidth&&b!=null&&b.clientHeight){const{isOrthographicCamera:Oe}=R;if(Oe||p)v.scale&&(Array.isArray(v.scale)?v.scale instanceof L?ce.current.scale.copy(v.scale.clone().divideScalar(1)):ce.current.scale.set(1/v.scale[0],1/v.scale[1],1/v.scale[2]):ce.current.scale.setScalar(1/v.scale));else{const Ee=(c||10)/400,Ve=b.clientWidth*Ee,Bt=b.clientHeight*Ee;ce.current.scale.set(Ve,Bt,1)}ze.current=!0}}}else{const b=H.children[0];if(b!=null&&b.clientWidth&&b!=null&&b.clientHeight){const Oe=1/Q.factor,Ee=b.clientWidth*Oe,Ve=b.clientHeight*Oe;ce.current.scale.set(Ee,Ve,1),ze.current=!0}ce.current.lookAt(N.camera.position)}});const de=g.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return g.createElement("group",$({},v,{ref:X}),h&&!ee&&g.createElement("mesh",{castShadow:A,receiveShadow:B,ref:ce},p||g.createElement("planeGeometry",null),m||g.createElement("shaderMaterial",{side:Gn,vertexShader:de.vertexShader,fragmentShader:de.fragmentShader})))});function va(n,e="pointer",t="auto",s=document.body){g.useEffect(()=>{if(n)return s.style.cursor=e,()=>void(s.style.cursor=t)},[n])}let We=0;const fi=xn(n=>(Ct.onStart=(e,t,s)=>{n({active:!0,item:e,loaded:t,total:s,progress:(t-We)/(s-We)*100})},Ct.onLoad=()=>{n({active:!1})},Ct.onError=e=>n(t=>({errors:[...t.errors,e]})),Ct.onProgress=(e,t,s)=>{t===s&&(We=s),n({active:!0,item:e,loaded:t,total:s,progress:(t-We)/(s-We)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),mi=n=>`Loading ${n.toFixed(2)}%`;function Ta({containerStyles:n,innerStyles:e,barStyles:t,dataStyles:s,dataInterpolation:r=mi,initialState:o=i=>i}){const{active:i,progress:a}=fi(),c=g.useRef(0),l=g.useRef(0),d=g.useRef(null),[h,u]=g.useState(o(i));g.useEffect(()=>{let B;return i!==h&&(B=setTimeout(()=>u(i),300)),()=>clearTimeout(B)},[h,i]);const A=g.useCallback(()=>{d.current&&(c.current+=(a-c.current)/2,(c.current>.95*a||a===100)&&(c.current=a),d.current.innerText=r(c.current),c.current<a&&(l.current=requestAnimationFrame(A)))},[r,a]);return g.useEffect(()=>(A(),()=>cancelAnimationFrame(l.current)),[A]),h?g.createElement("div",{style:{..._t.container,opacity:i?1:0,...n}},g.createElement("div",null,g.createElement("div",{style:{..._t.inner,...e}},g.createElement("div",{style:{..._t.bar,transform:`scaleX(${a/100})`,...t}}),g.createElement("span",{ref:d,style:{..._t.data,...s}})))):null}const _t={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function ht(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function os(n,e){return os=Object.setPrototypeOf||function(s,r){return s.__proto__=r,s},os(n,e)}function pi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function as(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=n[t];return s}function Bi(n,e){if(n){if(typeof n=="string")return as(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return as(n,e)}}function Ci(n){if(Array.isArray(n))return as(n)}function _i(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function gi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(n){return Ci(n)||_i(n)||Bi(n)||gi()}new ie;new ie;function yi(n,e,t){return Math.max(e,Math.min(t,n))}function vi(n,e){return yi(n-Math.floor(n/e)*e,0,e)}function Ti(n,e){var t=vi(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function ys(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var se=function n(e,t,s){var r=this;ys(this,n),ht(this,"dot2",function(o,i){return r.x*o+r.y*i}),ht(this,"dot3",function(o,i,a){return r.x*o+r.y*i+r.z*a}),this.x=e,this.y=t,this.z=s},Mi=[new se(1,1,0),new se(-1,1,0),new se(1,-1,0),new se(-1,-1,0),new se(1,0,1),new se(-1,0,1),new se(1,0,-1),new se(-1,0,-1),new se(0,1,1),new se(0,-1,1),new se(0,1,-1),new se(0,-1,-1)],Hs=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Us=new Array(512),Ls=new Array(512),Fi=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var s;t&1?s=Hs[t]^e&255:s=Hs[t]^e>>8&255,Us[t]=Us[t+256]=s,Ls[t]=Ls[t+256]=Mi[s%12]}};Fi(0);function Di(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function ws(n){var e=Di(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Ri=function n(e){var t=this;ys(this,n),ht(this,"seed",0),ht(this,"init",function(s){t.seed=s,t.value=ws(s)}),ht(this,"value",ws(this.seed)),this.init(e)};new Ri(Math.random());var Oi=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return s/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},Yn=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},Ii=function(e){return e},xi={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},Gi={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},bi={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},Hi={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},Ui={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},Li={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function Y(n,e,t){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Yn,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,c="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[c]===void 0&&(n.__damp[c]=0),Math.abs(n[e]-t)<=a)return n[e]=t,!1;s=Math.max(1e-4,s);var l=2/s,d=i(l*r),h=n[e]-t,u=t,A=o*s;h=Math.min(Math.max(h,-A),A),t=n[e]-h;var B=(n.__damp[c]+l*h)*r;n.__damp[c]=(n.__damp[c]-l*B)*d;var m=t+(h+B)*d;return u-n[e]>0==m>u&&(m=u,n.__damp[c]=(m-u)/r),n[e]=m,!0}var wi=function(e){return e&&e.isCamera},Si=function(e){return e&&e.isLight},qe=new L,Ss=new Te,Ps=new Te,$e=new pe,Pt=new L;function Pi(n,e,t,s,r,o,i){typeof e=="number"?qe.setScalar(e):Array.isArray(e)?qe.set(e[0],e[1],e[2]):qe.copy(e);var a=n.parent;n.updateWorldMatrix(!0,!1),Pt.setFromMatrixPosition(n.matrixWorld),wi(n)||Si(n)?$e.lookAt(Pt,qe,n.up):$e.lookAt(qe,Pt,n.up),Ot(n.quaternion,Ps.setFromRotationMatrix($e),t,s,r,o,i),a&&($e.extractRotation(a.matrixWorld),Ss.setFromRotationMatrix($e),Ot(n.quaternion,Ps.copy(n.quaternion).premultiply(Ss.invert()),t,s,r,o,i))}function Xe(n,e,t,s,r,o,i,a){return Y(n,e,n[e]+Ti(n[e],t),s,r,o,i,a)}var et=new ie,Js,Ks;function Ji(n,e,t,s,r,o,i){return typeof e=="number"?et.setScalar(e):Array.isArray(e)?et.set(e[0],e[1]):et.copy(e),Js=Y(n,"x",et.x,t,s,r,o,i),Ks=Y(n,"y",et.y,t,s,r,o,i),Js||Ks}var Se=new L,ks,Ns,Qs;function cs(n,e,t,s,r,o,i){return typeof e=="number"?Se.setScalar(e):Array.isArray(e)?Se.set(e[0],e[1],e[2]):Se.copy(e),ks=Y(n,"x",Se.x,t,s,r,o,i),Ns=Y(n,"y",Se.y,t,s,r,o,i),Qs=Y(n,"z",Se.z,t,s,r,o,i),ks||Ns||Qs}var Ge=new mt,Ys,Xs,js,Zs;function Ki(n,e,t,s,r,o,i){return typeof e=="number"?Ge.setScalar(e):Array.isArray(e)?Ge.set(e[0],e[1],e[2],e[3]):Ge.copy(e),Ys=Y(n,"x",Ge.x,t,s,r,o,i),Xs=Y(n,"y",Ge.y,t,s,r,o,i),js=Y(n,"z",Ge.z,t,s,r,o,i),Zs=Y(n,"w",Ge.w,t,s,r,o,i),Ys||Xs||js||Zs}var tt=new pr,zs,Vs,Ws;function ki(n,e,t,s,r,o,i){return Array.isArray(e)?tt.set(e[0],e[1],e[2],e[3]):tt.copy(e),zs=Xe(n,"x",tt.x,t,s,r,o,i),Vs=Xe(n,"y",tt.y,t,s,r,o,i),Ws=Xe(n,"z",tt.z,t,s,r,o,i),zs||Vs||Ws}var Pe=new Ce,qs,$s,en;function Ni(n,e,t,s,r,o,i){return e instanceof Ce?Pe.copy(e):Array.isArray(e)?Pe.setRGB(e[0],e[1],e[2]):Pe.set(e),qs=Y(n,"r",Pe.r,t,s,r,o,i),$s=Y(n,"g",Pe.g,t,s,r,o,i),en=Y(n,"b",Pe.b,t,s,r,o,i),qs||$s||en}var le=new Te,ye=new mt,tn=new mt,st=new mt,sn,nn,rn,on;function Ot(n,e,t,s,r,o,i){var a=n;Array.isArray(e)?le.set(e[0],e[1],e[2],e[3]):le.copy(e);var c=n.dot(le)>0?1:-1;return le.x*=c,le.y*=c,le.z*=c,le.w*=c,sn=Y(n,"x",le.x,t,s,r,o,i),nn=Y(n,"y",le.y,t,s,r,o,i),rn=Y(n,"z",le.z,t,s,r,o,i),on=Y(n,"w",le.w,t,s,r,o,i),ye.set(n.x,n.y,n.z,n.w).normalize(),tn.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),st.copy(ye).multiplyScalar(tn.dot(ye)/ye.dot(ye)),a.__damp.velocity_x-=st.x,a.__damp.velocity_y-=st.y,a.__damp.velocity_z-=st.z,a.__damp.velocity_w-=st.w,n.set(ye.x,ye.y,ye.z,ye.w),sn||nn||rn||on}var nt=new bn,an,cn,ln;function Qi(n,e,t,s,r,o,i){return Array.isArray(e)?nt.set(e[0],e[1],e[2]):nt.copy(e),an=Y(n,"radius",nt.radius,t,s,r,o,i),cn=Xe(n,"phi",nt.phi,t,s,r,o,i),ln=Xe(n,"theta",nt.theta,t,s,r,o,i),an||cn||ln}var gt=new pe,hn=new L,un=new Te,dn=new L,An,fn,mn;function Yi(n,e,t,s,r,o,i){var a=n;return a.__damp===void 0&&(a.__damp={position:new L,rotation:new Te,scale:new L},n.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?gt.set.apply(gt,Ei(e)):gt.copy(e),gt.decompose(hn,un,dn),An=cs(a.__damp.position,hn,t,s,r,o,i),fn=Ot(a.__damp.rotation,un,t,s,r,o,i),mn=cs(a.__damp.scale,dn,t,s,r,o,i),n.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),An||fn||mn}var Ma=Object.freeze({__proto__:null,rsqw:Oi,exp:Yn,linear:Ii,sine:xi,cubic:Gi,quint:bi,circ:Hi,quart:Ui,expo:Li,damp:Y,dampLookAt:Pi,dampAngle:Xe,damp2:Ji,damp3:cs,damp4:Ki,dampE:ki,dampC:Ni,dampQ:Ot,dampS:Qi,dampM:Yi});function Xi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&os(n,e)}function It(n){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},It(n)}function ji(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Zi(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ji(n)}function zi(n){var e=pi();return function(){var s=It(n),r;if(e){var o=It(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return Zi(this,r)}}var Vi=function(n){Xi(t,n);var e=zi(t);function t(){var s,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:16;ys(this,t),s=e.call(this),s.parameters={width:r,height:o,radius:i,segments:a};for(var c=r/2-i,l=o/2-i,d=i/r,h=(r-i)/r,u=i/o,A=(o-i)/o,B=[c,l,0,-c,l,0,-c,-l,0,c,-l,0],m=[h,A,d,A,d,u,h,u],p=[3*(a+1)+3,3*(a+1)+4,a+4,a+5,2*(a+1)+4,2,1,2*(a+1)+3,3,4*(a+1)+3,4,0],f=[p[0],p[1],p[2],p[0],p[2],p[3],p[4],p[5],p[6],p[4],p[6],p[7],p[8],p[9],p[10],p[8],p[10],p[11]],_,y,C,T,v,M,F,R,x=0;x<4;x++){T=x<1||x>2?c:-c,v=x<2?l:-l,M=x<1||x>2?h:d,F=x<2?A:u;for(var I=0;I<=a;I++)_=Math.PI/2*(x+I/a),y=Math.cos(_),C=Math.sin(_),B.push(T+i*y,v+i*C,0),m.push(M+d*y,F+u*C),I<a&&(R=(a+1)*x+I+4,f.push(x,R,R+1))}return s.setIndex(new Be(new Uint32Array(f),1)),s.setAttribute("position",new Be(new Float32Array(B),3)),s.setAttribute("uv",new Be(new Float32Array(m),2)),s}return t}(Bs);function Wi(n){for(var e=[],t=0;t<n.attributes.position.array.length/3;t++){var s=n.attributes.position.array[t*3+0],r=n.attributes.position.array[t*3+1],o=n.attributes.position.array[t*3+2];e.push(Math.atan2(s,o)/Math.PI*.5+.5,r/Math.PI*.5+.5)}return n.attributes.uv&&delete n.attributes.uv,n.setAttribute("uv",new ps(e,2)),n.attributes.uv.needsUpdate=!0,n}function qi(n){for(var e=[],t=[],s=0;s<n.attributes.position.array.length/3;s++){var r=n.attributes.position.array[s*3+0],o=n.attributes.position.array[s*3+1],i=n.attributes.position.array[s*3+2];t.push(new L(r,o,i))}for(var a=t.map(pn),c=0;c<a.length/3;c++)for(var l=new Br(t[c*3+0],t[c*3+1],t[c*3+2]),d=l.getNormal(new L),h=0;h<3;h++){var u=a[c*3+h];if(u.theta===0&&(u.phi===0||u.phi===Math.PI)){var A=u.phi===0?c*3+1:c*3+0;u={r:u.r,phi:u.phi,theta:a[A].theta}}u.theta===Math.PI&&pn(d).theta<Math.PI/2&&(u.theta=-Math.PI);var B=$i(u);e.push(1-B.x,1-B.y)}return n.attributes.uv&&delete n.attributes.uv,n.setAttribute("uv",new ps(e,2)),n.attributes.uv.needsUpdate=!0,n}function pn(n){var e=Math.sqrt(n.x*n.x+n.z*n.z+n.y*n.y);return{r:e,phi:Math.acos(n.y/e),theta:Math.atan2(n.z,n.x)}}function $i(n){return{y:n.phi/Math.PI,x:(n.theta+Math.PI)/(2*Math.PI)}}function eo(n){n.computeBoundingBox();var e=n.boundingBox.getSize(new L),t=Math.min(e.x,e.y,e.z),s=new Cr(t,t,t),r=new Ze(s);r.rotation.set(0,0,0),r.updateWorldMatrix(!0,!1);var o=r.matrix.clone().invert(),i=new bt(new L(-t/2,-t/2,-t/2),new L(t/2,t/2,t/2));return to(n,o,i,t),n.attributes.uv.needsUpdate=!0,n}function to(n,e,t,s){var r=[];r.length=2*n.attributes.position.array.length/3;var o=function(ee,te,ue){ee.applyMatrix4(e),te.applyMatrix4(e),ue.applyMatrix4(e);var J=new L;J.crossVectors(te.clone().sub(ee),te.clone().sub(ue)).normalize(),J.x=Math.abs(J.x),J.y=Math.abs(J.y),J.z=Math.abs(J.z);var de=new ie,N=new ie,b=new ie;return J.y>J.x&&J.y>J.z?(de.x=(ee.x-t.min.x)/s,de.y=(t.max.z-ee.z)/s,N.x=(te.x-t.min.x)/s,N.y=(t.max.z-te.z)/s,b.x=(ue.x-t.min.x)/s,b.y=(t.max.z-ue.z)/s):J.x>J.y&&J.x>J.z?(de.x=(ee.z-t.min.z)/s,de.y=(ee.y-t.min.y)/s,N.x=(te.z-t.min.z)/s,N.y=(te.y-t.min.y)/s,b.x=(ue.z-t.min.z)/s,b.y=(ue.y-t.min.y)/s):J.z>J.y&&J.z>J.x&&(de.x=(ee.x-t.min.x)/s,de.y=(ee.y-t.min.y)/s,N.x=(te.x-t.min.x)/s,N.y=(te.y-t.min.y)/s,b.x=(ue.x-t.min.x)/s,b.y=(ue.y-t.min.y)/s),{uv0:de,uv1:N,uv2:b}};if(n.index)for(var i=0;i<n.index.array.length;i+=3){var a=n.index.array[i],c=n.index.array[i+1],l=n.index.array[i+2],d=n.attributes.position.array[3*a],h=n.attributes.position.array[3*a+1],u=n.attributes.position.array[3*a+2],A=n.attributes.position.array[3*c],B=n.attributes.position.array[3*c+1],m=n.attributes.position.array[3*c+2],p=n.attributes.position.array[3*l],f=n.attributes.position.array[3*l+1],_=n.attributes.position.array[3*l+2],y=new L(d,h,u),C=new L(A,B,m),T=new L(p,f,_),v=o(y,C,T);r[2*a]=v.uv0.x,r[2*a+1]=v.uv0.y,r[2*c]=v.uv1.x,r[2*c+1]=v.uv1.y,r[2*l]=v.uv2.x,r[2*l+1]=v.uv2.y}else for(var M=0;M<n.attributes.position.array.length;M+=9){var F=n.attributes.position.array[M],R=n.attributes.position.array[M+1],x=n.attributes.position.array[M+2],I=n.attributes.position.array[M+3],S=n.attributes.position.array[M+4],P=n.attributes.position.array[M+5],Q=n.attributes.position.array[M+6],H=n.attributes.position.array[M+7],oe=n.attributes.position.array[M+8],X=new L(F,R,x),ae=new L(I,S,P),_e=new L(Q,H,oe),z=o(X,ae,_e),V=M/3,ge=V+1,ce=V+2;r[2*V]=z.uv0.x,r[2*V+1]=z.uv0.y,r[2*ge]=z.uv1.x,r[2*ge+1]=z.uv1.y,r[2*ce]=z.uv2.x,r[2*ce+1]=z.uv2.y}n.attributes.uv&&delete n.attributes.uv,n.setAttribute("uv",new ps(r,2))}var Fa=Object.freeze({__proto__:null,RoundedPlaneGeometry:Vi,applyCylindricalUV:Wi,applySphereUV:qi,applyBoxUV:eo});const so=n=>(e,t,s)=>{const r=s.subscribe;return s.subscribe=(i,a,c)=>{let l=i;if(a){const d=(c==null?void 0:c.equalityFn)||Object.is;let h=i(s.getState());l=u=>{const A=i(u);if(!d(h,A)){const B=h;a(h=A,B)}},c!=null&&c.fireImmediately&&a(h,h)}return r(l)},n(e,t,s)},Xn=g.createContext(null);function Da({map:n,children:e,onChange:t,domElement:s}){const r=n.map(c=>c.name+c.keys).join("-"),o=g.useMemo(()=>xn(so(()=>n.reduce((c,l)=>({...c,[l.name]:!1}),{}))),[r]),i=g.useMemo(()=>[o.subscribe,o.getState,o],[r]),a=o.setState;return g.useEffect(()=>{const l=n.map(({name:A,keys:B,up:m})=>({keys:B,up:m,fn:p=>{a({[A]:p}),t&&t(A,p,i[1]())}})).reduce((A,{keys:B,fn:m,up:p=!0})=>(B.forEach(f=>A[f]={fn:m,pressed:!1,up:p}),A),{}),d=({key:A,code:B})=>{const m=l[A]||l[B];if(!m)return;const{fn:p,pressed:f,up:_}=m;m.pressed=!0,(_||!f)&&p(!0)},h=({key:A,code:B})=>{const m=l[A]||l[B];if(!m)return;const{fn:p,up:f}=m;m.pressed=!1,f&&p(!1)},u=s||window;return u.addEventListener("keydown",d,{passive:!0}),u.addEventListener("keyup",h,{passive:!0}),()=>{u.removeEventListener("keydown",d),u.removeEventListener("keyup",h)}},[s,r]),g.createElement(Xn.Provider,{value:i,children:e})}function Ra(n){const[e,t,s]=g.useContext(Xn);return n?s(n):[e,t]}function no(n,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},s=n.getIndex(),r=n.getAttribute("position"),o=s?s.count:r.count;let i=0;const a=Object.keys(n.attributes),c={},l={},d=[],h=["getX","getY","getZ","getW"];for(let m=0,p=a.length;m<p;m++){const f=a[m];c[f]=[];const _=n.morphAttributes[f];_&&(l[f]=new Array(_.length).fill(0).map(()=>[]))}const u=Math.log10(1/e),A=Math.pow(10,u);for(let m=0;m<o;m++){const p=s?s.getX(m):m;let f="";for(let _=0,y=a.length;_<y;_++){const C=a[_],T=n.getAttribute(C),v=T.itemSize;for(let M=0;M<v;M++)f+=`${~~(T[h[M]](p)*A)},`}if(f in t)d.push(t[f]);else{for(let _=0,y=a.length;_<y;_++){const C=a[_],T=n.getAttribute(C),v=n.morphAttributes[C],M=T.itemSize,F=c[C],R=l[C];for(let x=0;x<M;x++){const I=h[x];if(F.push(T[I](p)),v)for(let S=0,P=v.length;S<P;S++)R[S].push(v[S][I](p))}}t[f]=i,d.push(i),i++}}const B=n.clone();for(let m=0,p=a.length;m<p;m++){const f=a[m],_=n.getAttribute(f),y=new _.array.constructor(c[f]),C=new Be(y,_.itemSize,_.normalized);if(B.setAttribute(f,C),f in l)for(let T=0;T<l[f].length;T++){const v=n.morphAttributes[f][T],M=new v.array.constructor(l[f][T]),F=new Be(M,v.itemSize,v.normalized);B.morphAttributes[f][T]=F}}return B.setIndex(d),B}function Bn(n,e){if(e===_r)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===ss||e===Hn){let t=n.getIndex();if(t===null){const i=[],a=n.getAttribute("position");if(a!==void 0){for(let c=0;c<a.count;c++)i.push(c);n.setIndex(i),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const s=t.count-2,r=[];if(t)if(e===ss)for(let i=1;i<=s;i++)r.push(t.getX(0)),r.push(t.getX(i)),r.push(t.getX(i+1));else for(let i=0;i<s;i++)i%2===0?(r.push(t.getX(i)),r.push(t.getX(i+1)),r.push(t.getX(i+2))):(r.push(t.getX(i+2)),r.push(t.getX(i+1)),r.push(t.getX(i)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=n.clone();return o.setIndex(r),o.clearGroups(),o}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}const ro=parseInt(Un.replace(/\D+/g,""));function jn(n,e,t={}){const s=new L,r=new Te,o=new L,i=new pe,a=new pe,c=new pe;t.preserveMatrix=t.preserveMatrix!==void 0?t.preserveMatrix:!0,t.preservePosition=t.preservePosition!==void 0?t.preservePosition:!0,t.preserveHipPosition=t.preserveHipPosition!==void 0?t.preserveHipPosition:!1,t.useTargetMatrix=t.useTargetMatrix!==void 0?t.useTargetMatrix:!1,t.hip=t.hip!==void 0?t.hip:"hip",t.names=t.names||{};const l=e.isObject3D?e.skeleton.bones:xt(e),d=n.isObject3D?n.skeleton.bones:xt(n);let h,u,A,B,m;if(n.isObject3D?n.skeleton.pose():(t.useTargetMatrix=!0,t.preserveMatrix=!1),t.preservePosition){m=[];for(let p=0;p<d.length;p++)m.push(d[p].position.clone())}if(t.preserveMatrix){n.updateMatrixWorld(),n.matrixWorld.identity();for(let p=0;p<n.children.length;++p)n.children[p].updateMatrixWorld(!0)}if(t.offsets){h=[];for(let p=0;p<d.length;++p)u=d[p],A=t.names[u.name]||u.name,t.offsets[A]&&(u.matrix.multiply(t.offsets[A]),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()),h.push(u.matrixWorld.clone())}for(let p=0;p<d.length;++p){if(u=d[p],A=t.names[u.name]||u.name,B=Zn(A,l),c.copy(u.matrixWorld),B){if(B.updateMatrixWorld(),t.useTargetMatrix?a.copy(B.matrixWorld):(a.copy(n.matrixWorld).invert(),a.multiply(B.matrixWorld)),o.setFromMatrixScale(a),a.scale(o.set(1/o.x,1/o.y,1/o.z)),c.makeRotationFromQuaternion(r.setFromRotationMatrix(a)),n.isObject3D){const f=d.indexOf(u),_=h?h[f]:i.copy(n.skeleton.boneInverses[f]).invert();c.multiply(_)}c.copyPosition(a)}u.parent&&u.parent.isBone?(u.matrix.copy(u.parent.matrixWorld).invert(),u.matrix.multiply(c)):u.matrix.copy(c),t.preserveHipPosition&&A===t.hip&&u.matrix.setPosition(s.set(0,u.position.y,0)),u.matrix.decompose(u.position,u.quaternion,u.scale),u.updateMatrixWorld()}if(t.preservePosition)for(let p=0;p<d.length;++p)u=d[p],A=t.names[u.name]||u.name,A!==t.hip&&u.position.copy(m[p]);t.preserveMatrix&&n.updateMatrixWorld(!0)}function io(n,e,t,s={}){s.useFirstFramePosition=s.useFirstFramePosition!==void 0?s.useFirstFramePosition:!1,s.fps=s.fps!==void 0?s.fps:30,s.names=s.names||[],e.isObject3D||(e=ao(e));const r=Math.round(t.duration*(s.fps/1e3)*1e3),o=1/s.fps,i=[],a=new Ln(e),c=xt(n.skeleton),l=[];let d,h,u,A,B;a.clipAction(t).play(),a.update(0),e.updateMatrixWorld();for(let m=0;m<r;++m){const p=m*o;jn(n,e,s);for(let f=0;f<c.length;++f)B=s.names[c[f].name]||c[f].name,u=Zn(B,e.skeleton),u&&(h=c[f],A=l[f]=l[f]||{bone:h},s.hip===B&&(A.pos||(A.pos={times:new Float32Array(r),values:new Float32Array(r*3)}),s.useFirstFramePosition&&(m===0&&(d=h.position.clone()),h.position.sub(d)),A.pos.times[m]=p,h.position.toArray(A.pos.values,m*3)),A.quat||(A.quat={times:new Float32Array(r),values:new Float32Array(r*4)}),A.quat.times[m]=p,h.quaternion.toArray(A.quat.values,m*4));a.update(o),e.updateMatrixWorld()}for(let m=0;m<l.length;++m)A=l[m],A&&(A.pos&&i.push(new wn(".bones["+A.bone.name+"].position",A.pos.times,A.pos.values)),i.push(new ns(".bones["+A.bone.name+"].quaternion",A.quat.times,A.quat.values)));return a.uncacheAction(t),new Sn(t.name,-1,i)}function oo(n){const e=new Map,t=new Map,s=n.clone();return zn(n,s,function(r,o){e.set(o,r),t.set(r,o)}),s.traverse(function(r){if(!r.isSkinnedMesh)return;const o=r,i=e.get(r),a=i.skeleton.bones;o.skeleton=i.skeleton.clone(),o.bindMatrix.copy(i.bindMatrix),o.skeleton.bones=a.map(function(c){return t.get(c)}),o.bind(o.skeleton,o.bindMatrix)}),s}function Zn(n,e){for(let t=0,s=xt(e);t<s.length;t++)if(n===s[t].name)return s[t]}function xt(n){return Array.isArray(n)?n:n.bones}function ao(n){const e=new gr(n.bones[0]);return e.skeleton=n,e}function zn(n,e,t){t(n,e);for(let s=0;s<n.children.length;s++)zn(n.children[s],e.children[s],t)}const co={retarget:jn,retargetClip:io,clone:oo};var lo=Object.defineProperty,ho=(n,e,t)=>e in n?lo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jt=(n,e,t)=>(ho(n,typeof e!="symbol"?e+"":e,t),t);class Qe{constructor(e){Jt(this,"camera",new ft(-1,1,1,-1,0,1)),Jt(this,"geometry",new Pn(2,2)),Jt(this,"mesh"),this.mesh=new Ze(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}class vs extends Cs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new po(t)}),this.register(function(t){return new To(t)}),this.register(function(t){return new Mo(t)}),this.register(function(t){return new Fo(t)}),this.register(function(t){return new Co(t)}),this.register(function(t){return new _o(t)}),this.register(function(t){return new go(t)}),this.register(function(t){return new Eo(t)}),this.register(function(t){return new mo(t)}),this.register(function(t){return new yo(t)}),this.register(function(t){return new Bo(t)}),this.register(function(t){return new vo(t)}),this.register(function(t){return new Ao(t)}),this.register(function(t){return new Do(t)}),this.register(function(t){return new Ro(t)})}load(e,t,s,r){const o=this;let i;this.resourcePath!==""?i=this.resourcePath:this.path!==""?i=this.path:i=Le.extractUrlBase(e),this.manager.itemStart(e);const a=function(l){r?r(l):console.error(l),o.manager.itemError(e),o.manager.itemEnd(e)},c=new ut(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(l){try{o.parse(l,i,function(d){t(d),o.manager.itemEnd(e)},a)}catch(d){a(d)}},s,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,s,r){let o;const i={},a={};if(typeof e=="string")o=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Le.decodeText(new Uint8Array(e.slice(0,4)))===Vn){try{i[G.KHR_BINARY_GLTF]=new Oo(e)}catch(d){r&&r(d);return}o=JSON.parse(i[G.KHR_BINARY_GLTF].content)}else o=JSON.parse(Le.decodeText(new Uint8Array(e)));else o=e;if(o.asset===void 0||o.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new ko(o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const d=this.pluginCallbacks[l](c);a[d.name]=d,i[d.name]=!0}if(o.extensionsUsed)for(let l=0;l<o.extensionsUsed.length;++l){const d=o.extensionsUsed[l],h=o.extensionsRequired||[];switch(d){case G.KHR_MATERIALS_UNLIT:i[d]=new fo;break;case G.KHR_DRACO_MESH_COMPRESSION:i[d]=new Io(o,this.dracoLoader);break;case G.KHR_TEXTURE_TRANSFORM:i[d]=new xo;break;case G.KHR_MESH_QUANTIZATION:i[d]=new Go;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(i),c.setPlugins(a),c.parse(s,r)}parseAsync(e,t){const s=this;return new Promise(function(r,o){s.parse(e,t,r,o)})}}function uo(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const G={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Ao{constructor(e){this.parser=e,this.name=G.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s];o.extensions&&o.extensions[this.name]&&o.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,o.extensions[this.name].light)}}_loadLight(e){const t=this.parser,s="light:"+e;let r=t.cache.get(s);if(r)return r;const o=t.json,c=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let l;const d=new Ce(16777215);c.color!==void 0&&d.fromArray(c.color);const h=c.range!==void 0?c.range:0;switch(c.type){case"directional":l=new vr(d),l.target.position.set(0,0,-1),l.add(l.target);break;case"point":l=new yr(d),l.distance=h;break;case"spot":l=new Er(d),l.distance=h,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,l.angle=c.spot.outerConeAngle,l.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,l.target.position.set(0,0,-1),l.add(l.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return l.position.set(0,0,0),l.decay=2,De(l,c),c.intensity!==void 0&&(l.intensity=c.intensity),l.name=t.createUniqueName(c.name||"light_"+e),r=Promise.resolve(l),t.cache.add(s,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,s=this.parser,o=s.json.nodes[e],a=(o.extensions&&o.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(c){return s._getNodeRef(t.cache,a,c)})}}class fo{constructor(){this.name=G.KHR_MATERIALS_UNLIT}getMaterialType(){return Ye}extendParams(e,t,s){const r=[];e.color=new Ce(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const i=o.baseColorFactor;e.color.fromArray(i),e.opacity=i[3]}o.baseColorTexture!==void 0&&r.push(s.assignTexture(e,"map",o.baseColorTexture,3001))}return Promise.all(r)}}class mo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name].emissiveStrength;return o!==void 0&&(t.emissiveIntensity=o),Promise.resolve()}}class po{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];if(i.clearcoatFactor!==void 0&&(t.clearcoat=i.clearcoatFactor),i.clearcoatTexture!==void 0&&o.push(s.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),i.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),i.clearcoatRoughnessTexture!==void 0&&o.push(s.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),i.clearcoatNormalTexture!==void 0&&(o.push(s.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),i.clearcoatNormalTexture.scale!==void 0)){const a=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ie(a,a)}return Promise.all(o)}}class Bo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.iridescenceFactor!==void 0&&(t.iridescence=i.iridescenceFactor),i.iridescenceTexture!==void 0&&o.push(s.assignTexture(t,"iridescenceMap",i.iridescenceTexture)),i.iridescenceIor!==void 0&&(t.iridescenceIOR=i.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),i.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=i.iridescenceThicknessMinimum),i.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=i.iridescenceThicknessMaximum),i.iridescenceThicknessTexture!==void 0&&o.push(s.assignTexture(t,"iridescenceThicknessMap",i.iridescenceThicknessTexture)),Promise.all(o)}}class Co{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_SHEEN}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new Ce(0,0,0),t.sheenRoughness=0,t.sheen=1;const i=r.extensions[this.name];return i.sheenColorFactor!==void 0&&t.sheenColor.fromArray(i.sheenColorFactor),i.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=i.sheenRoughnessFactor),i.sheenColorTexture!==void 0&&o.push(s.assignTexture(t,"sheenColorMap",i.sheenColorTexture,3001)),i.sheenRoughnessTexture!==void 0&&o.push(s.assignTexture(t,"sheenRoughnessMap",i.sheenRoughnessTexture)),Promise.all(o)}}class _o{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.transmissionFactor!==void 0&&(t.transmission=i.transmissionFactor),i.transmissionTexture!==void 0&&o.push(s.assignTexture(t,"transmissionMap",i.transmissionTexture)),Promise.all(o)}}class go{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_VOLUME}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];t.thickness=i.thicknessFactor!==void 0?i.thicknessFactor:0,i.thicknessTexture!==void 0&&o.push(s.assignTexture(t,"thicknessMap",i.thicknessTexture)),t.attenuationDistance=i.attenuationDistance||1/0;const a=i.attenuationColor||[1,1,1];return t.attenuationColor=new Ce(a[0],a[1],a[2]),Promise.all(o)}}class Eo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_IOR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=r.extensions[this.name];return t.ior=o.ior!==void 0?o.ior:1.5,Promise.resolve()}}class yo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_SPECULAR}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];t.specularIntensity=i.specularFactor!==void 0?i.specularFactor:1,i.specularTexture!==void 0&&o.push(s.assignTexture(t,"specularIntensityMap",i.specularTexture));const a=i.specularColorFactor||[1,1,1];return t.specularColor=new Ce(a[0],a[1],a[2]),i.specularColorTexture!==void 0&&o.push(s.assignTexture(t,"specularColorMap",i.specularColorTexture,3001)),Promise.all(o)}}class vo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const s=this.parser.json.materials[e];return!s.extensions||!s.extensions[this.name]?null:Re}extendMaterialParams(e,t){const s=this.parser,r=s.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],i=r.extensions[this.name];return i.anisotropyStrength!==void 0&&(t.anisotropy=i.anisotropyStrength),i.anisotropyRotation!==void 0&&(t.anisotropyRotation=i.anisotropyRotation),i.anisotropyTexture!==void 0&&o.push(s.assignTexture(t,"anisotropyMap",i.anisotropyTexture)),Promise.all(o)}}class To{constructor(e){this.parser=e,this.name=G.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,s=t.json,r=s.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const o=r.extensions[this.name],i=t.options.ktx2Loader;if(!i){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o.source,i)}}class Mo{constructor(e){this.parser=e,this.name=G.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,r=s.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const i=o.extensions[t],a=r.images[i.source];let c=s.textureLoader;if(a.uri){const l=s.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,i.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Fo{constructor(e){this.parser=e,this.name=G.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,s=this.parser,r=s.json,o=r.textures[e];if(!o.extensions||!o.extensions[t])return null;const i=o.extensions[t],a=r.images[i.source];let c=s.textureLoader;if(a.uri){const l=s.options.manager.getHandler(a.uri);l!==null&&(c=l)}return this.detectSupport().then(function(l){if(l)return s.loadTextureImage(e,i.source,c);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return s.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Do{constructor(e){this.name=G.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,s=t.bufferViews[e];if(s.extensions&&s.extensions[this.name]){const r=s.extensions[this.name],o=this.parser.getDependency("buffer",r.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return o.then(function(a){const c=r.byteOffset||0,l=r.byteLength||0,d=r.count,h=r.byteStride,u=new Uint8Array(a,c,l);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(d,h,u,r.mode,r.filter).then(function(A){return A.buffer}):i.ready.then(function(){const A=new ArrayBuffer(d*h);return i.decodeGltfBuffer(new Uint8Array(A),d,h,u,r.mode,r.filter),A})})}else return null}}class Ro{constructor(e){this.name=G.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,s=t.nodes[e];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const r=t.meshes[s.mesh];for(const l of r.primitives)if(l.mode!==re.TRIANGLES&&l.mode!==re.TRIANGLE_STRIP&&l.mode!==re.TRIANGLE_FAN&&l.mode!==void 0)return null;const i=s.extensions[this.name].attributes,a=[],c={};for(const l in i)a.push(this.parser.getDependency("accessor",i[l]).then(d=>(c[l]=d,c[l])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(l=>{const d=l.pop(),h=d.isGroup?d.children:[d],u=l[0].count,A=[];for(const B of h){const m=new pe,p=new L,f=new Te,_=new L(1,1,1),y=new Tr(B.geometry,B.material,u);for(let C=0;C<u;C++)c.TRANSLATION&&p.fromBufferAttribute(c.TRANSLATION,C),c.ROTATION&&f.fromBufferAttribute(c.ROTATION,C),c.SCALE&&_.fromBufferAttribute(c.SCALE,C),y.setMatrixAt(C,m.compose(p,f,_));for(const C in c)C!=="TRANSLATION"&&C!=="ROTATION"&&C!=="SCALE"&&B.geometry.setAttribute(C,c[C]);dt.prototype.copy.call(y,B),this.parser.assignFinalMaterial(y),A.push(y)}return d.isGroup?(d.clear(),d.add(...A),d):A[0]}))}}const Vn="glTF",rt=12,Cn={JSON:1313821514,BIN:5130562};class Oo{constructor(e){this.name=G.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,rt);if(this.header={magic:Le.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Vn)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-rt,r=new DataView(e,rt);let o=0;for(;o<s;){const i=r.getUint32(o,!0);o+=4;const a=r.getUint32(o,!0);if(o+=4,a===Cn.JSON){const c=new Uint8Array(e,rt+o,i);this.content=Le.decodeText(c)}else if(a===Cn.BIN){const c=rt+o;this.body=e.slice(c,c+i)}o+=i}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Io{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=G.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const s=this.json,r=this.dracoLoader,o=e.extensions[this.name].bufferView,i=e.extensions[this.name].attributes,a={},c={},l={};for(const d in i){const h=ls[d]||d.toLowerCase();a[h]=i[d]}for(const d in e.attributes){const h=ls[d]||d.toLowerCase();if(i[d]!==void 0){const u=s.accessors[e.attributes[d]],A=je[u.componentType];l[h]=A.name,c[h]=u.normalized===!0}}return t.getDependency("bufferView",o).then(function(d){return new Promise(function(h){r.decodeDracoFile(d,function(u){for(const A in u.attributes){const B=u.attributes[A],m=c[A];m!==void 0&&(B.normalized=m)}h(u)},a,l)})})}}class xo{constructor(){this.name=G.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Go{constructor(){this.name=G.KHR_MESH_QUANTIZATION}}class Wn extends jr{constructor(e,t,s,r){super(e,t,s,r)}copySampleValue_(e){const t=this.resultBuffer,s=this.sampleValues,r=this.valueSize,o=e*r*3+r;for(let i=0;i!==r;i++)t[i]=s[o+i];return t}interpolate_(e,t,s,r){const o=this.resultBuffer,i=this.sampleValues,a=this.valueSize,c=a*2,l=a*3,d=r-t,h=(s-t)/d,u=h*h,A=u*h,B=e*l,m=B-l,p=-2*A+3*u,f=A-u,_=1-p,y=f-u+h;for(let C=0;C!==a;C++){const T=i[m+C+a],v=i[m+C+c]*d,M=i[B+C+a],F=i[B+C]*d;o[C]=_*T+y*v+p*M+f*F}return o}}const bo=new Te;class Ho extends Wn{interpolate_(e,t,s,r){const o=super.interpolate_(e,t,s,r);return bo.fromArray(o).normalize().toArray(o),o}}const re={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},je={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},_n={9728:W,9729:At,9984:Sr,9985:Pr,9986:Jr,9987:_s},gn={33071:Kr,33648:kr,10497:rs},Kt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ls={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...ro>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Me={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Uo={CUBICSPLINE:void 0,LINEAR:Kn,STEP:Nr},kt={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Lo(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Jn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Qr})),n.DefaultMaterial}function be(n,e,t){for(const s in t.extensions)n[s]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[s]=t.extensions[s])}function De(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function wo(n,e,t){let s=!1,r=!1,o=!1;for(let l=0,d=e.length;l<d;l++){const h=e[l];if(h.POSITION!==void 0&&(s=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(o=!0),s&&r&&o)break}if(!s&&!r&&!o)return Promise.resolve(n);const i=[],a=[],c=[];for(let l=0,d=e.length;l<d;l++){const h=e[l];if(s){const u=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;i.push(u)}if(r){const u=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(u)}if(o){const u=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;c.push(u)}}return Promise.all([Promise.all(i),Promise.all(a),Promise.all(c)]).then(function(l){const d=l[0],h=l[1],u=l[2];return s&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=h),o&&(n.morphAttributes.color=u),n.morphTargetsRelative=!0,n})}function So(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,s=e.weights.length;t<s;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let s=0,r=t.length;s<r;s++)n.morphTargetDictionary[t[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Po(n){let e;const t=n.extensions&&n.extensions[G.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Nt(t.attributes):e=n.indices+":"+Nt(n.attributes)+":"+n.mode,n.targets!==void 0)for(let s=0,r=n.targets.length;s<r;s++)e+=":"+Nt(n.targets[s]);return e}function Nt(n){let e="";const t=Object.keys(n).sort();for(let s=0,r=t.length;s<r;s++)e+=t[s]+":"+n[t[s]]+";";return e}function hs(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Jo(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Ko=new pe;class ko{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new uo,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,r=!1,o=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,o=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||s||r&&o<98?this.textureLoader=new Mr(this.options.manager):this.textureLoader=new Fr(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new ut(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const s=this,r=this.json,o=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(i){return i._markDefs&&i._markDefs()}),Promise.all(this._invokeAll(function(i){return i.beforeRoot&&i.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(i){const a={scene:i[0][r.scene||0],scenes:i[0],animations:i[1],cameras:i[2],asset:r.asset,parser:s,userData:{}};be(o,a,r),De(a,r),Promise.all(s._invokeAll(function(c){return c.afterRoot&&c.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],s=this.json.meshes||[];for(let r=0,o=t.length;r<o;r++){const i=t[r].joints;for(let a=0,c=i.length;a<c;a++)e[i[a]].isBone=!0}for(let r=0,o=e.length;r<o;r++){const i=e[r];i.mesh!==void 0&&(this._addNodeRef(this.meshCache,i.mesh),i.skin!==void 0&&(s[i.mesh].isSkinnedMesh=!0)),i.camera!==void 0&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,s){if(e.refs[t]<=1)return s;const r=s.clone(),o=(i,a)=>{const c=this.associations.get(i);c!=null&&this.associations.set(a,c);for(const[l,d]of i.children.entries())o(d,a.children[l])};return o(s,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let s=0;s<t.length;s++){const r=e(t[s]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const s=[];for(let r=0;r<t.length;r++){const o=e(t[r]);o&&s.push(o)}return s}getDependency(e,t){const s=e+":"+t;let r=this.cache.get(s);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(o){return o.loadNode&&o.loadNode(t)});break;case"mesh":r=this._invokeOne(function(o){return o.loadMesh&&o.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(o){return o.loadBufferView&&o.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(o){return o.loadMaterial&&o.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(o){return o.loadTexture&&o.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(o){return o.loadAnimation&&o.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(o){return o!=this&&o.getDependency&&o.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(s,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const s=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(o,i){return s.getDependency(e,i)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],s=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[G.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(o,i){s.load(Le.resolveURL(t.uri,r.path),o,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(s){const r=t.byteLength||0,o=t.byteOffset||0;return s.slice(o,o+r)})}loadAccessor(e){const t=this,s=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const i=Kt[r.type],a=je[r.componentType],c=r.normalized===!0,l=new a(r.count*i);return Promise.resolve(new Be(l,i,c))}const o=[];return r.bufferView!==void 0?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),r.sparse!==void 0&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then(function(i){const a=i[0],c=Kt[r.type],l=je[r.componentType],d=l.BYTES_PER_ELEMENT,h=d*c,u=r.byteOffset||0,A=r.bufferView!==void 0?s.bufferViews[r.bufferView].byteStride:void 0,B=r.normalized===!0;let m,p;if(A&&A!==h){const f=Math.floor(u/A),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+f+":"+r.count;let y=t.cache.get(_);y||(m=new l(a,f*A,r.count*A/d),y=new Dr(m,A/d),t.cache.add(_,y)),p=new Yr(y,c,u%A/d,B)}else a===null?m=new l(r.count*c):m=new l(a,u,r.count*c),p=new Be(m,c,B);if(r.sparse!==void 0){const f=Kt.SCALAR,_=je[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,C=r.sparse.values.byteOffset||0,T=new _(i[1],y,r.sparse.count*f),v=new l(i[2],C,r.sparse.count*c);a!==null&&(p=new Be(p.array.slice(),p.itemSize,p.normalized));for(let M=0,F=T.length;M<F;M++){const R=T[M];if(p.setX(R,v[M*c]),c>=2&&p.setY(R,v[M*c+1]),c>=3&&p.setZ(R,v[M*c+2]),c>=4&&p.setW(R,v[M*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p})}loadTexture(e){const t=this.json,s=this.options,o=t.textures[e].source,i=t.images[o];let a=this.textureLoader;if(i.uri){const c=s.manager.getHandler(i.uri);c!==null&&(a=c)}return this.loadTextureImage(e,o,a)}loadTextureImage(e,t,s){const r=this,o=this.json,i=o.textures[e],a=o.images[t],c=(a.uri||a.bufferView)+":"+i.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,s).then(function(d){d.flipY=!1,d.name=i.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const u=(o.samplers||{})[i.sampler]||{};return d.magFilter=_n[u.magFilter]||At,d.minFilter=_n[u.minFilter]||_s,d.wrapS=gn[u.wrapS]||rs,d.wrapT=gn[u.wrapT]||rs,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=l,l}loadImageSource(e,t){const s=this,r=this.json,o=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const i=r.images[e],a=self.URL||self.webkitURL;let c=i.uri||"",l=!1;if(i.bufferView!==void 0)c=s.getDependency("bufferView",i.bufferView).then(function(h){l=!0;const u=new Blob([h],{type:i.mimeType});return c=a.createObjectURL(u),c});else if(i.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(h){return new Promise(function(u,A){let B=u;t.isImageBitmapLoader===!0&&(B=function(m){const p=new Os(m);p.needsUpdate=!0,u(p)}),t.load(Le.resolveURL(h,o.path),B,void 0,A)})}).then(function(h){return l===!0&&a.revokeObjectURL(c),h.userData.mimeType=i.mimeType||Jo(i.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),h});return this.sourceCache[e]=d,d}assignTexture(e,t,s,r){const o=this;return this.getDependency("texture",s.index).then(function(i){if(!i)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(i=i.clone(),i.channel=s.texCoord),o.extensions[G.KHR_TEXTURE_TRANSFORM]){const a=s.extensions!==void 0?s.extensions[G.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const c=o.associations.get(i);i=o.extensions[G.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),o.associations.set(i,c)}}return r!==void 0&&("colorSpace"in i?i.colorSpace=r===3001?"srgb":"srgb-linear":i.encoding=r),e[t]=i,i})}assignFinalMaterial(e){const t=e.geometry;let s=e.material;const r=t.attributes.tangent===void 0,o=t.attributes.color!==void 0,i=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Rr,Lt.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,c.sizeAttenuation=!1,this.cache.add(a,c)),s=c}else if(e.isLine){const a="LineBasicMaterial:"+s.uuid;let c=this.cache.get(a);c||(c=new Or,Lt.prototype.copy.call(c,s),c.color.copy(s.color),c.map=s.map,this.cache.add(a,c)),s=c}if(r||o||i){let a="ClonedMaterial:"+s.uuid+":";r&&(a+="derivative-tangents:"),o&&(a+="vertex-colors:"),i&&(a+="flat-shading:");let c=this.cache.get(a);c||(c=s.clone(),o&&(c.vertexColors=!0),i&&(c.flatShading=!0),r&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(a,c),this.associations.set(c,this.associations.get(s))),s=c}e.material=s}getMaterialType(){return Jn}loadMaterial(e){const t=this,s=this.json,r=this.extensions,o=s.materials[e];let i;const a={},c=o.extensions||{},l=[];if(c[G.KHR_MATERIALS_UNLIT]){const h=r[G.KHR_MATERIALS_UNLIT];i=h.getMaterialType(),l.push(h.extendParams(a,o,t))}else{const h=o.pbrMetallicRoughness||{};if(a.color=new Ce(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const u=h.baseColorFactor;a.color.fromArray(u),a.opacity=u[3]}h.baseColorTexture!==void 0&&l.push(t.assignTexture(a,"map",h.baseColorTexture,3001)),a.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,a.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(l.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),l.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),i=this._invokeOne(function(u){return u.getMaterialType&&u.getMaterialType(e)}),l.push(Promise.all(this._invokeAll(function(u){return u.extendMaterialParams&&u.extendMaterialParams(e,a)})))}o.doubleSided===!0&&(a.side=Gn);const d=o.alphaMode||kt.OPAQUE;if(d===kt.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===kt.MASK&&(a.alphaTest=o.alphaCutoff!==void 0?o.alphaCutoff:.5)),o.normalTexture!==void 0&&i!==Ye&&(l.push(t.assignTexture(a,"normalMap",o.normalTexture)),a.normalScale=new ie(1,1),o.normalTexture.scale!==void 0)){const h=o.normalTexture.scale;a.normalScale.set(h,h)}return o.occlusionTexture!==void 0&&i!==Ye&&(l.push(t.assignTexture(a,"aoMap",o.occlusionTexture)),o.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=o.occlusionTexture.strength)),o.emissiveFactor!==void 0&&i!==Ye&&(a.emissive=new Ce().fromArray(o.emissiveFactor)),o.emissiveTexture!==void 0&&i!==Ye&&l.push(t.assignTexture(a,"emissiveMap",o.emissiveTexture,3001)),Promise.all(l).then(function(){const h=new i(a);return o.name&&(h.name=o.name),De(h,o),t.associations.set(h,{materials:e}),o.extensions&&be(r,h,o),h})}createUniqueName(e){const t=Ir.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,s=this.extensions,r=this.primitiveCache;function o(a){return s[G.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(c){return En(c,a,t)})}const i=[];for(let a=0,c=e.length;a<c;a++){const l=e[a],d=Po(l),h=r[d];if(h)i.push(h.promise);else{let u;l.extensions&&l.extensions[G.KHR_DRACO_MESH_COMPRESSION]?u=o(l):u=En(new Bs,l,t),r[d]={primitive:l,promise:u},i.push(u)}}return Promise.all(i)}loadMesh(e){const t=this,s=this.json,r=this.extensions,o=s.meshes[e],i=o.primitives,a=[];for(let c=0,l=i.length;c<l;c++){const d=i[c].material===void 0?Lo(this.cache):this.getDependency("material",i[c].material);a.push(d)}return a.push(t.loadGeometries(i)),Promise.all(a).then(function(c){const l=c.slice(0,c.length-1),d=c[c.length-1],h=[];for(let A=0,B=d.length;A<B;A++){const m=d[A],p=i[A];let f;const _=l[A];if(p.mode===re.TRIANGLES||p.mode===re.TRIANGLE_STRIP||p.mode===re.TRIANGLE_FAN||p.mode===void 0)f=o.isSkinnedMesh===!0?new xr(m,_):new Ze(m,_),f.isSkinnedMesh===!0&&f.normalizeSkinWeights(),p.mode===re.TRIANGLE_STRIP?f.geometry=Bn(f.geometry,Hn):p.mode===re.TRIANGLE_FAN&&(f.geometry=Bn(f.geometry,ss));else if(p.mode===re.LINES)f=new Gr(m,_);else if(p.mode===re.LINE_STRIP)f=new br(m,_);else if(p.mode===re.LINE_LOOP)f=new Hr(m,_);else if(p.mode===re.POINTS)f=new Ur(m,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);Object.keys(f.geometry.morphAttributes).length>0&&So(f,o),f.name=t.createUniqueName(o.name||"mesh_"+e),De(f,o),p.extensions&&be(r,f,p),t.assignFinalMaterial(f),h.push(f)}for(let A=0,B=h.length;A<B;A++)t.associations.set(h[A],{meshes:e,primitives:A});if(h.length===1)return o.extensions&&be(r,h[0],o),h[0];const u=new wt;o.extensions&&be(r,u,o),t.associations.set(u,{meshes:e});for(let A=0,B=h.length;A<B;A++)u.add(h[A]);return u})}loadCamera(e){let t;const s=this.json.cameras[e],r=s[s.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?t=new ms(gs.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):s.type==="orthographic"&&(t=new ft(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),s.name&&(t.name=this.createUniqueName(s.name)),De(t,s),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],s=[];for(let r=0,o=t.joints.length;r<o;r++)s.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",t.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(r){const o=r.pop(),i=r,a=[],c=[];for(let l=0,d=i.length;l<d;l++){const h=i[l];if(h){a.push(h);const u=new pe;o!==null&&u.fromArray(o.array,l*16),c.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[l])}return new Lr(a,c)})}loadAnimation(e){const s=this.json.animations[e],r=s.name?s.name:"animation_"+e,o=[],i=[],a=[],c=[],l=[];for(let d=0,h=s.channels.length;d<h;d++){const u=s.channels[d],A=s.samplers[u.sampler],B=u.target,m=B.node,p=s.parameters!==void 0?s.parameters[A.input]:A.input,f=s.parameters!==void 0?s.parameters[A.output]:A.output;B.node!==void 0&&(o.push(this.getDependency("node",m)),i.push(this.getDependency("accessor",p)),a.push(this.getDependency("accessor",f)),c.push(A),l.push(B))}return Promise.all([Promise.all(o),Promise.all(i),Promise.all(a),Promise.all(c),Promise.all(l)]).then(function(d){const h=d[0],u=d[1],A=d[2],B=d[3],m=d[4],p=[];for(let f=0,_=h.length;f<_;f++){const y=h[f],C=u[f],T=A[f],v=B[f],M=m[f];if(y===void 0)continue;y.updateMatrix();let F;switch(Me[M.path]){case Me.weights:F=Xr;break;case Me.rotation:F=ns;break;case Me.position:case Me.scale:default:F=wn;break}const R=y.name?y.name:y.uuid,x=v.interpolation!==void 0?Uo[v.interpolation]:Kn,I=[];Me[M.path]===Me.weights?y.traverse(function(P){P.morphTargetInfluences&&I.push(P.name?P.name:P.uuid)}):I.push(R);let S=T.array;if(T.normalized){const P=hs(S.constructor),Q=new Float32Array(S.length);for(let H=0,oe=S.length;H<oe;H++)Q[H]=S[H]*P;S=Q}for(let P=0,Q=I.length;P<Q;P++){const H=new F(I[P]+"."+Me[M.path],C.array,S,x);v.interpolation==="CUBICSPLINE"&&(H.createInterpolant=function(X){const ae=this instanceof ns?Ho:Wn;return new ae(this.times,this.values,this.getValueSize()/3,X)},H.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),p.push(H)}}return new Sn(r,void 0,p)})}createNodeMesh(e){const t=this.json,s=this,r=t.nodes[e];return r.mesh===void 0?null:s.getDependency("mesh",r.mesh).then(function(o){const i=s._getNodeRef(s.meshCache,r.mesh,o);return r.weights!==void 0&&i.traverse(function(a){if(a.isMesh)for(let c=0,l=r.weights.length;c<l;c++)a.morphTargetInfluences[c]=r.weights[c]}),i})}loadNode(e){const t=this.json,s=this,r=t.nodes[e],o=s._loadNodeShallow(e),i=[],a=r.children||[];for(let l=0,d=a.length;l<d;l++)i.push(s.getDependency("node",a[l]));const c=r.skin===void 0?Promise.resolve(null):s.getDependency("skin",r.skin);return Promise.all([o,Promise.all(i),c]).then(function(l){const d=l[0],h=l[1],u=l[2];u!==null&&d.traverse(function(A){A.isSkinnedMesh&&A.bind(u,Ko)});for(let A=0,B=h.length;A<B;A++)d.add(h[A]);return d})}_loadNodeShallow(e){const t=this.json,s=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const o=t.nodes[e],i=o.name?r.createUniqueName(o.name):"",a=[],c=r._invokeOne(function(l){return l.createNodeMesh&&l.createNodeMesh(e)});return c&&a.push(c),o.camera!==void 0&&a.push(r.getDependency("camera",o.camera).then(function(l){return r._getNodeRef(r.cameraCache,o.camera,l)})),r._invokeAll(function(l){return l.createNodeAttachment&&l.createNodeAttachment(e)}).forEach(function(l){a.push(l)}),this.nodeCache[e]=Promise.all(a).then(function(l){let d;if(o.isBone===!0?d=new wr:l.length>1?d=new wt:l.length===1?d=l[0]:d=new dt,d!==l[0])for(let h=0,u=l.length;h<u;h++)d.add(l[h]);if(o.name&&(d.userData.name=o.name,d.name=i),De(d,o),o.extensions&&be(s,d,o),o.matrix!==void 0){const h=new pe;h.fromArray(o.matrix),d.applyMatrix4(h)}else o.translation!==void 0&&d.position.fromArray(o.translation),o.rotation!==void 0&&d.quaternion.fromArray(o.rotation),o.scale!==void 0&&d.scale.fromArray(o.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,s=this.json.scenes[e],r=this,o=new wt;s.name&&(o.name=r.createUniqueName(s.name)),De(o,s),s.extensions&&be(t,o,s);const i=s.nodes||[],a=[];for(let c=0,l=i.length;c<l;c++)a.push(r.getDependency("node",i[c]));return Promise.all(a).then(function(c){for(let d=0,h=c.length;d<h;d++)o.add(c[d]);const l=d=>{const h=new Map;for(const[u,A]of r.associations)(u instanceof Lt||u instanceof Os)&&h.set(u,A);return d.traverse(u=>{const A=r.associations.get(u);A!=null&&h.set(u,A)}),h};return r.associations=l(o),o})}}function No(n,e,t){const s=e.attributes,r=new bt;if(s.POSITION!==void 0){const a=t.json.accessors[s.POSITION],c=a.min,l=a.max;if(c!==void 0&&l!==void 0){if(r.set(new L(c[0],c[1],c[2]),new L(l[0],l[1],l[2])),a.normalized){const d=hs(je[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const o=e.targets;if(o!==void 0){const a=new L,c=new L;for(let l=0,d=o.length;l<d;l++){const h=o[l];if(h.POSITION!==void 0){const u=t.json.accessors[h.POSITION],A=u.min,B=u.max;if(A!==void 0&&B!==void 0){if(c.setX(Math.max(Math.abs(A[0]),Math.abs(B[0]))),c.setY(Math.max(Math.abs(A[1]),Math.abs(B[1]))),c.setZ(Math.max(Math.abs(A[2]),Math.abs(B[2]))),u.normalized){const m=hs(je[u.componentType]);c.multiplyScalar(m)}a.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const i=new kn;r.getCenter(i.center),i.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=i}function En(n,e,t){const s=e.attributes,r=[];function o(i,a){return t.getDependency("accessor",i).then(function(c){n.setAttribute(a,c)})}for(const i in s){const a=ls[i]||i.toLowerCase();a in n.attributes||r.push(o(s[i],a))}if(e.indices!==void 0&&!n.index){const i=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(i)}return De(n,e),No(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?wo(n,e.targets,t):n})}class Qo extends Zr{constructor(e,t={}){const{bevelEnabled:s=!1,bevelSize:r=8,bevelThickness:o=10,font:i,height:a=50,size:c=100,lineHeight:l=1,letterSpacing:d=0,...h}=t;if(i===void 0)super();else{const u=i.generateShapes(e,c,{lineHeight:l,letterSpacing:d});super(u,{...h,bevelEnabled:s,bevelSize:r,bevelThickness:o,depth:a})}this.type="TextGeometry"}}const Yo={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Xo={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};var jo=Object.defineProperty,Zo=(n,e,t)=>e in n?jo(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ts=(n,e,t)=>(Zo(n,typeof e!="symbol"?e+"":e,t),t);class zo extends Cs{constructor(e){super(e)}load(e,t,s,r){const o=new ut(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,i=>{if(typeof i!="string")throw new Error("unsupported data type");const a=JSON.parse(i),c=this.parse(a);t&&t(c)},s,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new Ms(e)}}class Ms{constructor(e){Ts(this,"data"),this.data=e}generateShapes(e,t=100,s){const r=[],o={letterSpacing:0,lineHeight:1,...s},i=Vo(e,t,this.data,o);for(let a=0,c=i.length;a<c;a++)Array.prototype.push.apply(r,i[a].toShapes(!1));return r}}Ts(Ms,"isFont");Ts(Ms,"type");function Vo(n,e,t,s){const r=Array.from(n),o=e/t.resolution,i=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*o,a=[];let c=0,l=0;for(let d=0;d<r.length;d++){const h=r[d];if(h===`
`)c=0,l-=i*s.lineHeight;else{const u=Wo(h,o,c,l,t);u&&(c+=u.offsetX+s.letterSpacing,a.push(u.path))}}return a}function Wo(n,e,t,s,r){const o=r.glyphs[n]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const i=new zr;let a,c,l,d,h,u,A,B;if(o.o){const m=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let p=0,f=m.length;p<f;)switch(m[p++]){case"m":a=parseInt(m[p++])*e+t,c=parseInt(m[p++])*e+s,i.moveTo(a,c);break;case"l":a=parseInt(m[p++])*e+t,c=parseInt(m[p++])*e+s,i.lineTo(a,c);break;case"q":l=parseInt(m[p++])*e+t,d=parseInt(m[p++])*e+s,h=parseInt(m[p++])*e+t,u=parseInt(m[p++])*e+s,i.quadraticCurveTo(h,u,l,d);break;case"b":l=parseInt(m[p++])*e+t,d=parseInt(m[p++])*e+s,h=parseInt(m[p++])*e+t,u=parseInt(m[p++])*e+s,A=parseInt(m[p++])*e+t,B=parseInt(m[p++])*e+s,i.bezierCurveTo(h,u,A,B,l,d);break}}return{offsetX:o.ha*e,path:i}}const Qt=new WeakMap;class qo extends Cs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,s,r){const o=new ut(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,i=>{const a={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(i,a).then(t).catch(r)},s,r)}decodeDracoFile(e,t,s,r){const o={attributeIDs:s||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!s};this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const l=t.attributeTypes[c];l.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=l.name)}const s=JSON.stringify(t);if(Qt.has(e)){const c=Qt.get(e);if(c.key===s)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const o=this.workerNextTaskID++,i=e.byteLength,a=this._getWorker(o,i).then(c=>(r=c,new Promise((l,d)=>{r._callbacks[o]={resolve:l,reject:d},r.postMessage({type:"decode",id:o,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return a.catch(()=>!0).then(()=>{r&&o&&this._releaseTask(r,o)}),Qt.set(e,{key:s,promise:a}),a}_createGeometry(e){const t=new Bs;e.index&&t.setIndex(new Be(e.index.array,1));for(let s=0;s<e.attributes.length;s++){const r=e.attributes[s],o=r.name,i=r.array,a=r.itemSize;t.setAttribute(o,new Be(i,a))}return t}_loadLibrary(e,t){const s=new ut(this.manager);return s.setPath(this.decoderPath),s.setResponseType(t),s.setWithCredentials(this.withCredentials),new Promise((r,o)=>{s.load(e,r,void 0,o)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(s=>{const r=s[0];e||(this.decoderConfig.wasmBinary=s[1]);const o=$o.toString(),i=["/* draco decoder */",r,"","/* worker */",o.substring(o.indexOf("{")+1,o.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([i]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(o){const i=o.data;switch(i.type){case"decode":r._callbacks[i.id].resolve(i);break;case"error":r._callbacks[i.id].reject(i);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+i.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,o){return r._taskLoad>o._taskLoad?-1:1});const s=this.workerPool[this.workerPool.length-1];return s._taskCosts[e]=t,s._taskLoad+=t,s})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function $o(){let n,e;onmessage=function(i){const a=i.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(n)});break;case"decode":const c=a.buffer,l=a.taskConfig;e.then(d=>{const h=d.draco,u=new h.Decoder,A=new h.DecoderBuffer;A.Init(new Int8Array(c),c.byteLength);try{const B=t(h,u,A,l),m=B.attributes.map(p=>p.array.buffer);B.index&&m.push(B.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:B},m)}catch(B){console.error(B),self.postMessage({type:"error",id:a.id,error:B.message})}finally{h.destroy(A),h.destroy(u)}});break}};function t(i,a,c,l){const d=l.attributeIDs,h=l.attributeTypes;let u,A;const B=a.GetEncodedGeometryType(c);if(B===i.TRIANGULAR_MESH)u=new i.Mesh,A=a.DecodeBufferToMesh(c,u);else if(B===i.POINT_CLOUD)u=new i.PointCloud,A=a.DecodeBufferToPointCloud(c,u);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!A.ok()||u.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+A.error_msg());const m={index:null,attributes:[]};for(const p in d){const f=self[h[p]];let _,y;if(l.useUniqueIDs)y=d[p],_=a.GetAttributeByUniqueId(u,y);else{if(y=a.GetAttributeId(u,i[d[p]]),y===-1)continue;_=a.GetAttribute(u,y)}m.attributes.push(r(i,a,u,p,f,_))}return B===i.TRIANGULAR_MESH&&(m.index=s(i,a,u)),i.destroy(u),m}function s(i,a,c){const d=c.num_faces()*3,h=d*4,u=i._malloc(h);a.GetTrianglesUInt32Array(c,h,u);const A=new Uint32Array(i.HEAPF32.buffer,u,d).slice();return i._free(u),{array:A,itemSize:1}}function r(i,a,c,l,d,h){const u=h.num_components(),B=c.num_points()*u,m=B*d.BYTES_PER_ELEMENT,p=o(i,d),f=i._malloc(m);a.GetAttributeDataArrayForAllPoints(c,h,p,m,f);const _=new d(i.HEAPF32.buffer,f,B).slice();return i._free(f),{name:l,array:_,itemSize:u}}function o(i,a){switch(a){case Float32Array:return i.DT_FLOAT32;case Int8Array:return i.DT_INT8;case Int16Array:return i.DT_INT16;case Int32Array:return i.DT_INT32;case Uint8Array:return i.DT_UINT8;case Uint16Array:return i.DT_UINT16;case Uint32Array:return i.DT_UINT32}}}let Et;const Yt=()=>{if(Et)return Et;const n="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",e="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",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),s=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let o;const i=WebAssembly.instantiate(a(r),{}).then(h=>{o=h.instance,o.exports.__wasm_call_ctors()});function a(h){const u=new Uint8Array(h.length);for(let B=0;B<h.length;++B){const m=h.charCodeAt(B);u[B]=m>96?m-71:m>64?m-65:m>47?m+4:m>46?63:62}let A=0;for(let B=0;B<h.length;++B)u[A++]=u[B]<60?s[u[B]]:(u[B]-60)*64+u[++B];return u.buffer.slice(0,A)}function c(h,u,A,B,m,p){const f=o.exports.sbrk,_=A+3&-4,y=f(_*B),C=f(m.length),T=new Uint8Array(o.exports.memory.buffer);T.set(m,C);const v=h(y,A,B,C,m.length);if(v===0&&p&&p(y,_,B),u.set(T.subarray(y,y+A*B)),f(y-f(0)),v!==0)throw new Error(`Malformed buffer data: ${v}`)}const l={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Et={ready:i,supported:!0,decodeVertexBuffer(h,u,A,B,m){c(o.exports.meshopt_decodeVertexBuffer,h,u,A,B,o.exports[l[m]])},decodeIndexBuffer(h,u,A,B){c(o.exports.meshopt_decodeIndexBuffer,h,u,A,B)},decodeIndexSequence(h,u,A,B){c(o.exports.meshopt_decodeIndexSequence,h,u,A,B)},decodeGltfBuffer(h,u,A,B,m,p){c(o.exports[d[m]],h,u,A,B,o.exports[l[p]])}},Et},Oa=g.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:s,fontSize:r=1,children:o,characters:i,onSync:a,...c},l)=>{const{Text:d,preloadFont:h}=ts(async()=>ri(()=>import("./troika-three-text.esm-DRjhaUTW.js"),__vite__mapDeps([0,1])),[]),u=j(({invalidate:p})=>p),[A]=g.useState(()=>new d),[B,m]=g.useMemo(()=>{const p=[];let f="";return g.Children.forEach(o,_=>{typeof _=="string"||typeof _=="number"?f+=_:p.push(_)}),[p,f]},[o]);return ts(()=>new Promise(p=>h({font:s,characters:i},p)),["troika-text",s,i]),g.useLayoutEffect(()=>void A.sync(()=>{u(),a&&a(A)})),g.useEffect(()=>()=>A.dispose(),[A]),g.createElement("primitive",$({object:A,ref:l,font:s,text:m,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},c),B)});let Xt=null;async function qn(n){Xt||(Xt=new zo);let e=typeof n=="string"?await(await fetch(n)).json():n;return Xt.parse(e)}function Fs(n){return ts(qn,[n])}Fs.preload=n=>ur(qn,[n]);Fs.clear=n=>dr([n]);const ea=["string","number"],ta=n=>{let e="";const t=[];return g.Children.forEach(n,s=>{ea.includes(typeof s)?e+=s+"":t.push(s)}),[e,...t]},Ia=g.forwardRef(({font:n,letterSpacing:e=0,lineHeight:t=1,size:s=1,height:r=.2,bevelThickness:o=.1,bevelSize:i=.01,bevelEnabled:a=!1,bevelOffset:c=0,bevelSegments:l=4,curveSegments:d=8,smooth:h,children:u,...A},B)=>{g.useMemo(()=>As({RenamedTextGeometry:Qo}),[]);const m=g.useRef(null),p=Fs(n),f=g.useMemo(()=>({font:p,size:s,height:r,bevelThickness:o,bevelSize:i,bevelEnabled:a,bevelSegments:l,bevelOffset:c,curveSegments:d,letterSpacing:e,lineHeight:t}),[p,s,r,o,i,a,l,c,d,e,t]),[_,...y]=g.useMemo(()=>ta(u),[u]),C=g.useMemo(()=>[_,f],[_,f]);return g.useLayoutEffect(()=>{h&&(m.current.geometry=no(m.current.geometry,h),m.current.geometry.computeVertexNormals())},[C,h]),g.useImperativeHandle(B,()=>m.current,[]),g.createElement("mesh",$({},A,{ref:m}),g.createElement("renamedTextGeometry",{args:C}),y)});function sa(n,e,t,s){const r=class extends ve{constructor(i={}){const a=Object.entries(n);super({uniforms:a.reduce((c,[l,d])=>{const h=Vr.clone({[l]:{value:d}});return{...c,...h}},{}),vertexShader:e,fragmentShader:t}),this.key="",a.forEach(([c])=>Object.defineProperty(this,c,{get:()=>this.uniforms[c].value,set:l=>this.uniforms[c].value=l})),Object.assign(this,i),s&&s(this)}};return r.key=gs.generateUUID(),r}const na=()=>parseInt(Un.replace(/\D+/g,"")),$n=na();function ra(n,{keys:e=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:t,inject:s,castShadow:r,receiveShadow:o}){let i={};for(const a of e)i[a]=n[a];return t&&(i.geometry&&t!=="materialsOnly"&&(i.geometry=i.geometry.clone()),i.material&&t!=="geometriesOnly"&&(i.material=i.material.clone())),s&&(typeof s=="function"?i={...i,children:s(n)}:g.isValidElement(s)?i={...i,children:s}:i={...i,...s}),n instanceof Ze&&(r&&(i.castShadow=!0),o&&(i.receiveShadow=!0)),i}const us=g.forwardRef(({isChild:n=!1,object:e,children:t,deep:s,castShadow:r,receiveShadow:o,inject:i,keys:a,...c},l)=>{const d={keys:a,deep:s,inject:i,castShadow:r,receiveShadow:o};if(e=g.useMemo(()=>{if(n===!1&&!Array.isArray(e)){let B=!1;if(e.traverse(m=>{m.isSkinnedMesh&&(B=!0)}),B)return co.clone(e)}return e},[e,n]),Array.isArray(e))return g.createElement("group",$({},c,{ref:l}),e.map(B=>g.createElement(us,$({key:B.uuid,object:B},d))),t);const{children:h,...u}=ra(e,d),A=e.type[0].toLowerCase()+e.type.slice(1);return g.createElement(A,$({},u,c,{ref:l}),e.children.map(B=>B.type==="Bone"?g.createElement("primitive",$({key:B.uuid,object:B},d)):g.createElement(us,$({key:B.uuid,object:B},d,{isChild:!0}))),t,h)});let yt=null,er="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function tr(n,e,t){return s=>{t&&t(s),n&&(yt||(yt=new qo),yt.setDecoderPath(typeof n=="string"?n:er),s.setDRACOLoader(yt)),e&&s.setMeshoptDecoder(typeof Yt=="function"?Yt():Yt)}}function Ht(n,e=!0,t=!0,s){return fs(vs,n,tr(e,t,s))}Ht.preload=(n,e=!0,t=!0,s)=>fs.preload(vs,n,tr(e,t,s));Ht.clear=n=>fs.clear(vs,n);Ht.setDecoderPath=n=>{er=n};const Ga=g.forwardRef(({src:n,...e},t)=>{const{scene:s}=Ht(n);return g.createElement(us,$({ref:t},e,{object:s}))});function Gt(n,e,t){const s=j(u=>u.size),r=j(u=>u.viewport),o=typeof n=="number"?n:s.width*r.dpr,i=typeof e=="number"?e:s.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:c=0,depth:l,...d}=a,h=g.useMemo(()=>{const u=new me(o,i,{minFilter:At,magFilter:At,type:Wr,...d});return l&&(u.depthTexture=new qr(o,i,Rt)),u.samples=c,u},[]);return g.useLayoutEffect(()=>{h.setSize(o,i),c&&(h.samples=c)},[c,h,o,i]),g.useEffect(()=>()=>h.dispose(),[]),h}/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const k={LEFT:1,RIGHT:2,MIDDLE:4},E=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),Je={NONE:0,IN:1,OUT:-1};function He(n){return n.isPerspectiveCamera}function Fe(n){return n.isOrthographicCamera}const Ke=Math.PI*2,yn=Math.PI/2,sr=1e-5,it=Math.PI/180;function he(n,e,t){return Math.max(e,Math.min(t,n))}function K(n,e=sr){return Math.abs(n)<e}function w(n,e,t=sr){return K(n-e,t)}function vn(n,e){return Math.round(n/e)*e}function ot(n){return isFinite(n)?n:n<0?-Number.MAX_VALUE:Number.MAX_VALUE}function at(n){return Math.abs(n)<Number.MAX_VALUE?n:n*(1/0)}function vt(n,e,t,s,r=1/0,o){s=Math.max(1e-4,s);const i=2/s,a=i*o,c=1/(1+a+.48*a*a+.235*a*a*a);let l=n-e;const d=e,h=r*s;l=he(l,-h,h),e=n-l;const u=(t.value+i*l)*o;t.value=(t.value-i*u)*c;let A=e+(l+u)*c;return d-n>0==A>d&&(A=d,t.value=(A-d)/o),A}function Tn(n,e,t,s,r=1/0,o,i){s=Math.max(1e-4,s);const a=2/s,c=a*o,l=1/(1+c+.48*c*c+.235*c*c*c);let d=e.x,h=e.y,u=e.z,A=n.x-d,B=n.y-h,m=n.z-u;const p=d,f=h,_=u,y=r*s,C=y*y,T=A*A+B*B+m*m;if(T>C){const H=Math.sqrt(T);A=A/H*y,B=B/H*y,m=m/H*y}d=n.x-A,h=n.y-B,u=n.z-m;const v=(t.x+a*A)*o,M=(t.y+a*B)*o,F=(t.z+a*m)*o;t.x=(t.x-a*v)*l,t.y=(t.y-a*M)*l,t.z=(t.z-a*F)*l,i.x=d+(A+v)*l,i.y=h+(B+M)*l,i.z=u+(m+F)*l;const R=p-n.x,x=f-n.y,I=_-n.z,S=i.x-p,P=i.y-f,Q=i.z-_;return R*S+x*P+I*Q>0&&(i.x=p,i.y=f,i.z=_,t.x=(i.x-p)/o,t.y=(i.y-f)/o,t.z=(i.z-_)/o),i}function jt(n,e){e.set(0,0),n.forEach(t=>{e.x+=t.clientX,e.y+=t.clientY}),e.x/=n.length,e.y/=n.length}function Zt(n,e){return Fe(n)?(console.warn(`${e} is not supported in OrthographicCamera`),!0):!1}class ia{constructor(){this._listeners={}}addEventListener(e,t){const s=this._listeners;s[e]===void 0&&(s[e]=[]),s[e].indexOf(t)===-1&&s[e].push(t)}hasEventListener(e,t){const s=this._listeners;return s[e]!==void 0&&s[e].indexOf(t)!==-1}removeEventListener(e,t){const r=this._listeners[e];if(r!==void 0){const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}removeAllEventListeners(e){if(!e){this._listeners={};return}Array.isArray(this._listeners[e])&&(this._listeners[e].length=0)}dispatchEvent(e){const s=this._listeners[e.type];if(s!==void 0){e.target=this;const r=s.slice(0);for(let o=0,i=r.length;o<i;o++)r[o].call(this,e)}}}var zt;const oa="2.8.3",Tt=1/8,aa=/Mac/.test((zt=globalThis==null?void 0:globalThis.navigator)===null||zt===void 0?void 0:zt.platform);let D,Mn,Mt,Vt,q,O,U,ke,ct,Ae,fe,Ue,Fn,Dn,ne,lt,Ne,Rn,Wt,On,qt,$t,Ft,es=class ds extends ia{static install(e){D=e.THREE,Mn=Object.freeze(new D.Vector3(0,0,0)),Mt=Object.freeze(new D.Vector3(0,1,0)),Vt=Object.freeze(new D.Vector3(0,0,1)),q=new D.Vector2,O=new D.Vector3,U=new D.Vector3,ke=new D.Vector3,ct=new D.Vector3,Ae=new D.Vector3,fe=new D.Vector3,Ue=new D.Vector3,Fn=new D.Vector3,Dn=new D.Vector3,ne=new D.Spherical,lt=new D.Spherical,Ne=new D.Box3,Rn=new D.Box3,Wt=new D.Sphere,On=new D.Quaternion,qt=new D.Quaternion,$t=new D.Matrix4,Ft=new D.Raycaster}static get ACTION(){return E}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=E.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=Je.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new D.Vector3,this._focalOffsetVelocity=new D.Vector3,this._zoomVelocity={value:0},this._truckInternal=(f,_,y)=>{let C,T;if(He(this._camera)){const v=O.copy(this._camera.position).sub(this._target),M=this._camera.getEffectiveFOV()*it,F=v.length()*Math.tan(M*.5);C=this.truckSpeed*f*F/this._elementRect.height,T=this.truckSpeed*_*F/this._elementRect.height}else if(Fe(this._camera)){const v=this._camera;C=f*(v.right-v.left)/v.zoom/this._elementRect.width,T=_*(v.top-v.bottom)/v.zoom/this._elementRect.height}else return;this.verticalDragToForward?(y?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(C,0,!0),this.forward(-T,!0)):y?this.setFocalOffset(this._focalOffsetEnd.x+C,this._focalOffsetEnd.y+T,this._focalOffsetEnd.z,!0):this.truck(C,T,!0)},this._rotateInternal=(f,_)=>{const y=Ke*this.azimuthRotateSpeed*f/this._elementRect.height,C=Ke*this.polarRotateSpeed*_/this._elementRect.height;this.rotate(y,C,!0)},this._dollyInternal=(f,_,y)=>{const C=Math.pow(.95,-f*this.dollySpeed),T=this._sphericalEnd.radius,v=this._sphericalEnd.radius*C,M=he(v,this.minDistance,this.maxDistance),F=M-v;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(v,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(F,!0),this._dollyToNoClamp(M,!0)):this._dollyToNoClamp(M,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?v:M)-T,this._dollyControlCoord.set(_,y)),this._lastDollyDirection=Math.sign(-f)},this._zoomInternal=(f,_,y)=>{const C=Math.pow(.95,f*this.dollySpeed),T=this._zoom,v=this._zoom*C;this.zoomTo(v,!0),this.dollyToCursor&&(this._changedZoom+=v-T,this._dollyControlCoord.set(_,y))},typeof D>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=new D.Quaternion().setFromUnitVectors(this._camera.up,Mt),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=E.NONE,this._target=new D.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new D.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new D.Spherical().setFromVector3(O.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new D.Vector3,new D.Vector3,new D.Vector3,new D.Vector3],this._updateNearPlaneCorners(),this._boundary=new D.Box3(new D.Vector3(-1/0,-1/0,-1/0),new D.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new D.Vector2,this.mouseButtons={left:E.ROTATE,middle:E.DOLLY,right:E.TRUCK,wheel:He(this._camera)?E.DOLLY:Fe(this._camera)?E.ZOOM:E.NONE},this.touches={one:E.TOUCH_ROTATE,two:He(this._camera)?E.TOUCH_DOLLY_TRUCK:Fe(this._camera)?E.TOUCH_ZOOM_TRUCK:E.NONE,three:E.TOUCH_TRUCK};const s=new D.Vector2,r=new D.Vector2,o=new D.Vector2,i=f=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const C=this._domElement.getBoundingClientRect(),T=f.clientX/C.width,v=f.clientY/C.height;if(T<this._interactiveArea.left||T>this._interactiveArea.right||v<this._interactiveArea.top||v>this._interactiveArea.bottom)return}const _=f.pointerType!=="mouse"?null:(f.buttons&k.LEFT)===k.LEFT?k.LEFT:(f.buttons&k.MIDDLE)===k.MIDDLE?k.MIDDLE:(f.buttons&k.RIGHT)===k.RIGHT?k.RIGHT:null;if(_!==null){const C=this._findPointerByMouseButton(_);C&&this._disposePointer(C)}if((f.buttons&k.LEFT)===k.LEFT&&this._lockedPointer)return;const y={pointerId:f.pointerId,clientX:f.clientX,clientY:f.clientY,deltaX:0,deltaY:0,mouseButton:_};this._activePointers.push(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),this._isDragging=!0,u(f)},a=f=>{f.cancelable&&f.preventDefault();const _=f.pointerId,y=this._lockedPointer||this._findPointerById(_);if(y){if(y.clientX=f.clientX,y.clientY=f.clientY,y.deltaX=f.movementX,y.deltaY=f.movementY,this._state=0,f.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(f.buttons&k.LEFT)===k.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(f.buttons&k.MIDDLE)===k.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(f.buttons&k.RIGHT)===k.RIGHT&&(this._state=this._state|this.mouseButtons.right);A()}},c=f=>{const _=this._findPointerById(f.pointerId);if(!(_&&_===this._lockedPointer)){if(_&&this._disposePointer(_),f.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=E.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=E.NONE;B()}};let l=-1;const d=f=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===E.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const v=this._domElement.getBoundingClientRect(),M=f.clientX/v.width,F=f.clientY/v.height;if(M<this._interactiveArea.left||M>this._interactiveArea.right||F<this._interactiveArea.top||F>this._interactiveArea.bottom)return}if(f.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===E.ROTATE||this.mouseButtons.wheel===E.TRUCK){const v=performance.now();l-v<1e3&&this._getClientRect(this._elementRect),l=v}const _=aa?-1:-3,y=f.deltaMode===1?f.deltaY/_:f.deltaY/(_*10),C=this.dollyToCursor?(f.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,T=this.dollyToCursor?(f.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case E.ROTATE:{this._rotateInternal(f.deltaX,f.deltaY),this._isUserControllingRotate=!0;break}case E.TRUCK:{this._truckInternal(f.deltaX,f.deltaY,!1),this._isUserControllingTruck=!0;break}case E.OFFSET:{this._truckInternal(f.deltaX,f.deltaY,!0),this._isUserControllingOffset=!0;break}case E.DOLLY:{this._dollyInternal(-y,C,T),this._isUserControllingDolly=!0;break}case E.ZOOM:{this._zoomInternal(-y,C,T),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},h=f=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===ds.ACTION.NONE){const _=f instanceof PointerEvent?f.pointerId:0,y=this._findPointerById(_);y&&this._disposePointer(y),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c);return}f.preventDefault()}},u=f=>{if(!this._enabled)return;if(jt(this._activePointers,q),this._getClientRect(this._elementRect),s.copy(q),r.copy(q),this._activePointers.length>=2){const y=q.x-this._activePointers[1].clientX,C=q.y-this._activePointers[1].clientY,T=Math.sqrt(y*y+C*C);o.set(0,T);const v=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,M=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;r.set(v,M)}if(this._state=0,!f)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in f&&f.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(f.buttons&k.LEFT)===k.LEFT&&(this._state=this._state|this.mouseButtons.left),(f.buttons&k.MIDDLE)===k.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(f.buttons&k.RIGHT)===k.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&E.ROTATE)===E.ROTATE||(this._state&E.TOUCH_ROTATE)===E.TOUCH_ROTATE||(this._state&E.TOUCH_DOLLY_ROTATE)===E.TOUCH_DOLLY_ROTATE||(this._state&E.TOUCH_ZOOM_ROTATE)===E.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&E.TRUCK)===E.TRUCK||(this._state&E.TOUCH_TRUCK)===E.TOUCH_TRUCK||(this._state&E.TOUCH_DOLLY_TRUCK)===E.TOUCH_DOLLY_TRUCK||(this._state&E.TOUCH_ZOOM_TRUCK)===E.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&E.DOLLY)===E.DOLLY||(this._state&E.TOUCH_DOLLY)===E.TOUCH_DOLLY||(this._state&E.TOUCH_DOLLY_TRUCK)===E.TOUCH_DOLLY_TRUCK||(this._state&E.TOUCH_DOLLY_OFFSET)===E.TOUCH_DOLLY_OFFSET||(this._state&E.TOUCH_DOLLY_ROTATE)===E.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&E.ZOOM)===E.ZOOM||(this._state&E.TOUCH_ZOOM)===E.TOUCH_ZOOM||(this._state&E.TOUCH_ZOOM_TRUCK)===E.TOUCH_ZOOM_TRUCK||(this._state&E.TOUCH_ZOOM_OFFSET)===E.TOUCH_ZOOM_OFFSET||(this._state&E.TOUCH_ZOOM_ROTATE)===E.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&E.OFFSET)===E.OFFSET||(this._state&E.TOUCH_OFFSET)===E.TOUCH_OFFSET||(this._state&E.TOUCH_DOLLY_OFFSET)===E.TOUCH_DOLLY_OFFSET||(this._state&E.TOUCH_ZOOM_OFFSET)===E.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},A=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,jt(this._activePointers,q);const _=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,y=_?-_.deltaX:r.x-q.x,C=_?-_.deltaY:r.y-q.y;if(r.copy(q),((this._state&E.ROTATE)===E.ROTATE||(this._state&E.TOUCH_ROTATE)===E.TOUCH_ROTATE||(this._state&E.TOUCH_DOLLY_ROTATE)===E.TOUCH_DOLLY_ROTATE||(this._state&E.TOUCH_ZOOM_ROTATE)===E.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(y,C),this._isUserControllingRotate=!0),(this._state&E.DOLLY)===E.DOLLY||(this._state&E.ZOOM)===E.ZOOM){const T=this.dollyToCursor?(s.x-this._elementRect.x)/this._elementRect.width*2-1:0,v=this.dollyToCursor?(s.y-this._elementRect.y)/this._elementRect.height*-2+1:0,M=this.dollyDragInverted?-1:1;(this._state&E.DOLLY)===E.DOLLY?(this._dollyInternal(M*C*Tt,T,v),this._isUserControllingDolly=!0):(this._zoomInternal(M*C*Tt,T,v),this._isUserControllingZoom=!0)}if((this._state&E.TOUCH_DOLLY)===E.TOUCH_DOLLY||(this._state&E.TOUCH_ZOOM)===E.TOUCH_ZOOM||(this._state&E.TOUCH_DOLLY_TRUCK)===E.TOUCH_DOLLY_TRUCK||(this._state&E.TOUCH_ZOOM_TRUCK)===E.TOUCH_ZOOM_TRUCK||(this._state&E.TOUCH_DOLLY_OFFSET)===E.TOUCH_DOLLY_OFFSET||(this._state&E.TOUCH_ZOOM_OFFSET)===E.TOUCH_ZOOM_OFFSET||(this._state&E.TOUCH_DOLLY_ROTATE)===E.TOUCH_DOLLY_ROTATE||(this._state&E.TOUCH_ZOOM_ROTATE)===E.TOUCH_ZOOM_ROTATE){const T=q.x-this._activePointers[1].clientX,v=q.y-this._activePointers[1].clientY,M=Math.sqrt(T*T+v*v),F=o.y-M;o.set(0,M);const R=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,x=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&E.TOUCH_DOLLY)===E.TOUCH_DOLLY||(this._state&E.TOUCH_DOLLY_ROTATE)===E.TOUCH_DOLLY_ROTATE||(this._state&E.TOUCH_DOLLY_TRUCK)===E.TOUCH_DOLLY_TRUCK||(this._state&E.TOUCH_DOLLY_OFFSET)===E.TOUCH_DOLLY_OFFSET?(this._dollyInternal(F*Tt,R,x),this._isUserControllingDolly=!0):(this._zoomInternal(F*Tt,R,x),this._isUserControllingZoom=!0)}((this._state&E.TRUCK)===E.TRUCK||(this._state&E.TOUCH_TRUCK)===E.TOUCH_TRUCK||(this._state&E.TOUCH_DOLLY_TRUCK)===E.TOUCH_DOLLY_TRUCK||(this._state&E.TOUCH_ZOOM_TRUCK)===E.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(y,C,!1),this._isUserControllingTruck=!0),((this._state&E.OFFSET)===E.OFFSET||(this._state&E.TOUCH_OFFSET)===E.TOUCH_OFFSET||(this._state&E.TOUCH_DOLLY_OFFSET)===E.TOUCH_DOLLY_OFFSET||(this._state&E.TOUCH_ZOOM_OFFSET)===E.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(y,C,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},B=()=>{jt(this._activePointers,q),r.copy(q),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",m),this._domElement.ownerDocument.addEventListener("pointerlockerror",p),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),u())},this.unlockPointer=()=>{var f,_,y;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(f=this._domElement)===null||f===void 0||f.ownerDocument.exitPointerLock(),(_=this._domElement)===null||_===void 0||_.ownerDocument.removeEventListener("pointerlockchange",m),(y=this._domElement)===null||y===void 0||y.ownerDocument.removeEventListener("pointerlockerror",p),this.cancel()};const m=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},p=()=>{this.unlockPointer()};this._addAllEventListeners=f=>{this._domElement=f,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",i),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",d,{passive:!1}),this._domElement.addEventListener("contextmenu",h)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",i),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",d,{passive:!1}),this._domElement.removeEventListener("contextmenu",h),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("pointerlockchange",m),this._domElement.ownerDocument.removeEventListener("pointerlockerror",p))},this.cancel=()=>{this._state!==E.NONE&&(this._state=E.NONE,this._activePointers.length=0,B())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=he(e.width,0,1),this._interactiveArea.height=he(e.height,0,1),this._interactiveArea.x=he(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=he(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t,s=!1){return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,s)}rotateAzimuthTo(e,t=!1){return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e,t=!1){return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t,s=!1){this._isUserControllingRotate=!1;const r=he(e,this.minAzimuthAngle,this.maxAzimuthAngle),o=he(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=o,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,s||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const i=!s||w(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&w(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(i)}dolly(e,t=!1){return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e,t=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=Je.NONE,this._changedDolly=0,this._dollyToNoClamp(he(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e,t=!1){const s=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const i=this._collisionTest(),a=w(i,this._spherical.radius);if(!(s>e)&&a)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,i)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const o=!t||w(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(o)}dollyInFixed(e,t=!1){this._targetEnd.add(this._getCameraDirection(ct).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const s=!t||w(this._target.x,this._targetEnd.x,this.restThreshold)&&w(this._target.y,this._targetEnd.y,this.restThreshold)&&w(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(s)}zoom(e,t=!1){return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e,t=!1){this._isUserControllingZoom=!1,this._zoomEnd=he(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const s=!t||w(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(s)}pan(e,t,s=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,s)}truck(e,t,s=!1){this._camera.updateMatrix(),Ae.setFromMatrixColumn(this._camera.matrix,0),fe.setFromMatrixColumn(this._camera.matrix,1),Ae.multiplyScalar(e),fe.multiplyScalar(-t);const r=O.copy(Ae).add(fe),o=U.copy(this._targetEnd).add(r);return this.moveTo(o.x,o.y,o.z,s)}forward(e,t=!1){O.setFromMatrixColumn(this._camera.matrix,0),O.crossVectors(this._camera.up,O),O.multiplyScalar(e);const s=U.copy(this._targetEnd).add(O);return this.moveTo(s.x,s.y,s.z,t)}elevate(e,t=!1){return O.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+O.x,this._targetEnd.y+O.y,this._targetEnd.z+O.z,t)}moveTo(e,t,s,r=!1){this._isUserControllingTruck=!1;const o=O.set(e,t,s).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,o,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const i=!r||w(this._target.x,this._targetEnd.x,this.restThreshold)&&w(this._target.y,this._targetEnd.y,this.restThreshold)&&w(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}lookInDirectionOf(e,t,s,r=!1){const a=O.set(e,t,s).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(a.x,a.y,a.z,r)}fitToBox(e,t,{cover:s=!1,paddingLeft:r=0,paddingRight:o=0,paddingBottom:i=0,paddingTop:a=0}={}){const c=[],l=e.isBox3?Ne.copy(e):Ne.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const d=vn(this._sphericalEnd.theta,yn),h=vn(this._sphericalEnd.phi,yn);c.push(this.rotateTo(d,h,t));const u=O.setFromSpherical(this._sphericalEnd).normalize(),A=On.setFromUnitVectors(u,Vt),B=w(Math.abs(u.y),1);B&&A.multiply(qt.setFromAxisAngle(Mt,d)),A.multiply(this._yAxisUpSpaceInverse);const m=Rn.makeEmpty();U.copy(l.min).applyQuaternion(A),m.expandByPoint(U),U.copy(l.min).setX(l.max.x).applyQuaternion(A),m.expandByPoint(U),U.copy(l.min).setY(l.max.y).applyQuaternion(A),m.expandByPoint(U),U.copy(l.max).setZ(l.min.z).applyQuaternion(A),m.expandByPoint(U),U.copy(l.min).setZ(l.max.z).applyQuaternion(A),m.expandByPoint(U),U.copy(l.max).setY(l.min.y).applyQuaternion(A),m.expandByPoint(U),U.copy(l.max).setX(l.min.x).applyQuaternion(A),m.expandByPoint(U),U.copy(l.max).applyQuaternion(A),m.expandByPoint(U),m.min.x-=r,m.min.y-=i,m.max.x+=o,m.max.y+=a,A.setFromUnitVectors(Vt,u),B&&A.premultiply(qt.invert()),A.premultiply(this._yAxisUpSpace);const p=m.getSize(O),f=m.getCenter(U).applyQuaternion(A);if(He(this._camera)){const _=this.getDistanceToFitBox(p.x,p.y,p.z,s);c.push(this.moveTo(f.x,f.y,f.z,t)),c.push(this.dollyTo(_,t)),c.push(this.setFocalOffset(0,0,0,t))}else if(Fe(this._camera)){const _=this._camera,y=_.right-_.left,C=_.top-_.bottom,T=s?Math.max(y/p.x,C/p.y):Math.min(y/p.x,C/p.y);c.push(this.moveTo(f.x,f.y,f.z,t)),c.push(this.zoomTo(T,t)),c.push(this.setFocalOffset(0,0,0,t))}return Promise.all(c)}fitToSphere(e,t){const s=[],o=e instanceof D.Sphere?Wt.copy(e):ds.createBoundingSphere(e,Wt);if(s.push(this.moveTo(o.center.x,o.center.y,o.center.z,t)),He(this._camera)){const i=this.getDistanceToFitSphere(o.radius);s.push(this.dollyTo(i,t))}else if(Fe(this._camera)){const i=this._camera.right-this._camera.left,a=this._camera.top-this._camera.bottom,c=2*o.radius,l=Math.min(i/c,a/c);s.push(this.zoomTo(l,t))}return s.push(this.setFocalOffset(0,0,0,t)),Promise.all(s)}setLookAt(e,t,s,r,o,i,a=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Je.NONE,this._changedDolly=0;const c=U.set(r,o,i),l=O.set(e,t,s);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(l.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const d=!a||w(this._target.x,this._targetEnd.x,this.restThreshold)&&w(this._target.y,this._targetEnd.y,this.restThreshold)&&w(this._target.z,this._targetEnd.z,this.restThreshold)&&w(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&w(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&w(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(d)}lerpLookAt(e,t,s,r,o,i,a,c,l,d,h,u,A,B=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=Je.NONE,this._changedDolly=0;const m=O.set(r,o,i),p=U.set(e,t,s);ne.setFromVector3(p.sub(m).applyQuaternion(this._yAxisUpSpace));const f=ke.set(d,h,u),_=U.set(a,c,l);lt.setFromVector3(_.sub(f).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(m.lerp(f,A));const y=lt.theta-ne.theta,C=lt.phi-ne.phi,T=lt.radius-ne.radius;this._sphericalEnd.set(ne.radius+T*A,ne.phi+C*A,ne.theta+y*A),this.normalizeRotations(),this._needsUpdate=!0,B||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const v=!B||w(this._target.x,this._targetEnd.x,this.restThreshold)&&w(this._target.y,this._targetEnd.y,this.restThreshold)&&w(this._target.z,this._targetEnd.z,this.restThreshold)&&w(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&w(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&w(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(v)}setPosition(e,t,s,r=!1){return this.setLookAt(e,t,s,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,s,r=!1){const o=this.getPosition(O),i=this.setLookAt(o.x,o.y,o.z,e,t,s,r);return this._sphericalEnd.phi=he(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),i}setFocalOffset(e,t,s,r=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,s),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const o=!r||w(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&w(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&w(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}setOrbitPoint(e,t,s){this._camera.updateMatrixWorld(),Ae.setFromMatrixColumn(this._camera.matrixWorldInverse,0),fe.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Ue.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=O.set(e,t,s),o=r.distanceTo(this._camera.position),i=r.sub(this._camera.position);Ae.multiplyScalar(i.x),fe.multiplyScalar(i.y),Ue.multiplyScalar(i.z),O.copy(Ae).add(fe).add(Ue),O.z=O.z+o,this.dollyTo(o,!1),this.setFocalOffset(-O.x,O.y,-O.z,!1),this.moveTo(e,t,s,!1)}setBoundary(e){if(!e){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,s,r){if(e===null){this._viewport=null;return}this._viewport=this._viewport||new D.Vector4,typeof e=="number"?this._viewport.set(e,t,s,r):this._viewport.copy(e)}getDistanceToFitBox(e,t,s,r=!1){if(Zt(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const o=e/t,i=this._camera.getEffectiveFOV()*it,a=this._camera.aspect;return((r?o>a:o<a)?t:e/a)*.5/Math.tan(i*.5)+s*.5}getDistanceToFitSphere(e){if(Zt(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*it,s=Math.atan(Math.tan(t*.5)*this._camera.aspect)*2,r=1<this._camera.aspect?t:s;return e/Math.sin(r*.5)}getTarget(e,t=!0){return(e&&e.isVector3?e:new D.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e,t=!0){return(e&&e.isVector3?e:new D.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e,t=!0){return(e&&e instanceof D.Spherical?e:new D.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e,t=!0){return(e&&e.isVector3?e:new D.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%Ke,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=Ke),this._spherical.theta+=Ke*Math.round((this._sphericalEnd.theta-this._spherical.theta)/Ke)}reset(e=!1){if(!w(this._camera.up.x,this._cameraUp0.x)||!w(this._camera.up.y,this._cameraUp0.y)||!w(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const s=this.getPosition(O);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,Mt),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=O.subVectors(this._target,this._camera.position).normalize(),t=U.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const s=this.getPosition(O);this.updateCameraUp(),this.setPosition(s.x,s.y,s.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,s=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,o=Fn.subVectors(this._targetEnd,this._target),i=Dn.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(K(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=vt(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,h,1/0,e),this._needsUpdate=!0}if(K(s))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const h=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=vt(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,h,1/0,e),this._needsUpdate=!0}if(K(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const h=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=vt(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,h,this.maxSpeed,e),this._needsUpdate=!0}if(K(o.x)&&K(o.y)&&K(o.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const h=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;Tn(this._target,this._targetEnd,this._targetVelocity,h,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(K(i.x)&&K(i.y)&&K(i.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const h=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;Tn(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,h,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(K(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const h=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=vt(this._zoom,this._zoomEnd,this._zoomVelocity,h,1/0,e)}if(this.dollyToCursor){if(He(this._camera)&&this._changedDolly!==0){const h=this._spherical.radius-this._lastDistance,u=this._camera,A=this._getCameraDirection(ct),B=O.copy(A).cross(u.up).normalize();B.lengthSq()===0&&(B.x=1);const m=U.crossVectors(B,A),p=this._sphericalEnd.radius*Math.tan(u.getEffectiveFOV()*it*.5),_=(this._sphericalEnd.radius-h-this._sphericalEnd.radius)/this._sphericalEnd.radius,y=ke.copy(this._targetEnd).add(B.multiplyScalar(this._dollyControlCoord.x*p*u.aspect)).add(m.multiplyScalar(this._dollyControlCoord.y*p)),C=O.copy(this._targetEnd).lerp(y,_),T=this._lastDollyDirection===Je.IN&&this._spherical.radius<=this.minDistance,v=this._lastDollyDirection===Je.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(T||v)){this._sphericalEnd.radius-=h,this._spherical.radius-=h;const F=U.copy(A).multiplyScalar(-h);C.add(F)}this._boundary.clampPoint(C,C);const M=U.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(M),this._changedDolly-=h,K(this._changedDolly)&&(this._changedDolly=0)}else if(Fe(this._camera)&&this._changedZoom!==0){const h=this._zoom-this._lastZoom,u=this._camera,A=O.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(u.near+u.far)/(u.near-u.far)).unproject(u),B=U.set(0,0,-1).applyQuaternion(u.quaternion),m=ke.copy(A).add(B.multiplyScalar(-A.dot(u.up))),f=-(this._zoom-h-this._zoom)/this._zoom,_=this._getCameraDirection(ct),y=this._targetEnd.dot(_),C=O.copy(this._targetEnd).lerp(m,f),T=C.dot(_),v=_.multiplyScalar(T-y);C.sub(v),this._boundary.clampPoint(C,C);const M=U.subVectors(C,this._targetEnd);this._targetEnd.copy(C),this._target.add(M),this._changedZoom-=h,K(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const c=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,c),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!K(this._focalOffset.x)||!K(this._focalOffset.y)||!K(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),Ae.setFromMatrixColumn(this._camera.matrix,0),fe.setFromMatrixColumn(this._camera.matrix,1),Ue.setFromMatrixColumn(this._camera.matrix,2),Ae.multiplyScalar(this._focalOffset.x),fe.multiplyScalar(-this._focalOffset.y),Ue.multiplyScalar(this._focalOffset.z),O.copy(Ae).add(fe).add(Ue),this._camera.position.add(O)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),O.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const d=this._needsUpdate;return d&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):d?(this.dispatchEvent({type:"update"}),K(t,this.restThreshold)&&K(s,this.restThreshold)&&K(r,this.restThreshold)&&K(o.x,this.restThreshold)&&K(o.y,this.restThreshold)&&K(o.z,this.restThreshold)&&K(i.x,this.restThreshold)&&K(i.y,this.restThreshold)&&K(i.z,this.restThreshold)&&K(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!d&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=d,this._needsUpdate=!1,d}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ot(this.maxDistance),minZoom:this.minZoom,maxZoom:ot(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ot(this.maxPolarAngle),minAzimuthAngle:ot(this.minAzimuthAngle),maxAzimuthAngle:ot(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:O.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e,t=!1){const s=JSON.parse(e);this.enabled=s.enabled,this.minDistance=s.minDistance,this.maxDistance=at(s.maxDistance),this.minZoom=s.minZoom,this.maxZoom=at(s.maxZoom),this.minPolarAngle=s.minPolarAngle,this.maxPolarAngle=at(s.maxPolarAngle),this.minAzimuthAngle=at(s.minAzimuthAngle),this.maxAzimuthAngle=at(s.maxAzimuthAngle),this.smoothTime=s.smoothTime,this.draggingSmoothTime=s.draggingSmoothTime,this.dollySpeed=s.dollySpeed,this.truckSpeed=s.truckSpeed,this.dollyToCursor=s.dollyToCursor,this.verticalDragToForward=s.verticalDragToForward,this._target0.fromArray(s.target0),this._position0.fromArray(s.position0),this._zoom0=s.zoom0,this._focalOffset0.fromArray(s.focalOffset0),this.moveTo(s.target[0],s.target[1],s.target[2],t),ne.setFromVector3(O.fromArray(s.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(ne.theta,ne.phi,t),this.dollyTo(ne.radius,t),this.zoomTo(s.zoom,t),this.setFocalOffset(s.focalOffset[0],s.focalOffset[1],s.focalOffset[2],t),this._needsUpdate=!0}connect(e){if(this._domElement){console.warn("camera-controls is already connected.");return}e.setAttribute("data-camera-controls-version",oa),this._addAllEventListeners(e),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find(t=>t.pointerId===e)}_findPointerByMouseButton(e){return this._activePointers.find(t=>t.mouseButton===e)}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,s){const r=t.lengthSq();if(r===0)return e;const o=U.copy(t).add(e),a=this._boundary.clampPoint(o,ke).sub(o),c=a.lengthSq();if(c===0)return e.add(t);if(c===r)return e;if(s===0)return e.add(t).add(a);{const l=1+s*c/t.dot(a);return e.add(U.copy(t).multiplyScalar(l)).add(a.multiplyScalar(1-s))}}_updateNearPlaneCorners(){if(He(this._camera)){const e=this._camera,t=e.near,s=e.getEffectiveFOV()*it,r=Math.tan(s*.5)*t,o=r*e.aspect;this._nearPlaneCorners[0].set(-o,-r,0),this._nearPlaneCorners[1].set(o,-r,0),this._nearPlaneCorners[2].set(o,r,0),this._nearPlaneCorners[3].set(-o,r,0)}else if(Fe(this._camera)){const e=this._camera,t=1/e.zoom,s=e.left*t,r=e.right*t,o=e.top*t,i=e.bottom*t;this._nearPlaneCorners[0].set(s,o,0),this._nearPlaneCorners[1].set(r,o,0),this._nearPlaneCorners[2].set(r,i,0),this._nearPlaneCorners[3].set(s,i,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||Zt(this._camera,"_collisionTest"))return e;const s=this._getTargetDirection(ct);$t.lookAt(Mn,s,this._camera.up);for(let r=0;r<4;r++){const o=U.copy(this._nearPlaneCorners[r]);o.applyMatrix4($t);const i=ke.addVectors(this._target,o);Ft.set(i,s),Ft.far=this._spherical.radius+1;const a=Ft.intersectObjects(this.colliderMeshes);a.length!==0&&a[0].distance<e&&(e=a[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(t=>{const s=()=>{this.removeEventListener("rest",s),t()};this.addEventListener("rest",s)}))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e,t=new D.Sphere){const s=t,r=s.center;Ne.makeEmpty(),e.traverseVisible(i=>{i.isMesh&&Ne.expandByObject(i)}),Ne.getCenter(r);let o=0;return e.traverseVisible(i=>{if(!i.isMesh)return;const a=i,c=a.geometry.clone();c.applyMatrix4(a.matrixWorld);const d=c.attributes.position;for(let h=0,u=d.count;h<u;h++)O.fromBufferAttribute(d,h),o=Math.max(o,r.distanceToSquared(O))}),s.radius=Math.sqrt(o),s}};const ba=g.forwardRef((n,e)=>{g.useMemo(()=>{const T={Box3:bt,MathUtils:{clamp:gs.clamp},Matrix4:pe,Quaternion:Te,Raycaster:$r,Sphere:kn,Spherical:bn,Vector2:ie,Vector3:L,Vector4:mt};es.install({THREE:T}),As({CameraControlsImpl:es})},[]);const{camera:t,domElement:s,makeDefault:r,onStart:o,onEnd:i,onChange:a,regress:c,...l}=n,d=j(T=>T.camera),h=j(T=>T.gl),u=j(T=>T.invalidate),A=j(T=>T.events),B=j(T=>T.setEvents),m=j(T=>T.set),p=j(T=>T.get),f=j(T=>T.performance),_=t||d,y=s||A.connected||h.domElement,C=g.useMemo(()=>new es(_),[_]);return we((T,v)=>{C.enabled&&C.update(v)},-1),g.useEffect(()=>(C.connect(y),()=>void C.disconnect()),[y,C]),g.useEffect(()=>{const T=F=>{u(),c&&f.regress(),a&&a(F)},v=F=>{o&&o(F)},M=F=>{i&&i(F)};return C.addEventListener("update",T),C.addEventListener("controlstart",v),C.addEventListener("controlend",M),C.addEventListener("control",T),C.addEventListener("transitionstart",T),C.addEventListener("wake",T),()=>{C.removeEventListener("update",T),C.removeEventListener("controlstart",v),C.removeEventListener("controlend",M),C.removeEventListener("control",T),C.removeEventListener("transitionstart",T),C.removeEventListener("wake",T)}},[C,o,i,u,B,c,a]),g.useEffect(()=>{if(r){const T=p().controls;return m({controls:C}),()=>m({controls:T})}},[r,C]),g.createElement("primitive",$({ref:e,object:C},l))});function Ha(n,e){const t=g.useRef(),[s]=g.useState(()=>e?e instanceof dt?{current:e}:e:t),[r]=g.useState(()=>new Ln(void 0));g.useLayoutEffect(()=>{e&&(s.current=e instanceof dt?e:e.current),r._root=s.current});const o=g.useRef({}),i=g.useMemo(()=>{const a={};return n.forEach(c=>Object.defineProperty(a,c.name,{enumerable:!0,get(){if(s.current)return o.current[c.name]||(o.current[c.name]=r.clipAction(c,s.current))},configurable:!0})),{ref:s,clips:n,actions:a,names:n.map(c=>c.name),mixer:r}},[n]);return we((a,c)=>r.update(c)),g.useEffect(()=>{const a=s.current;return()=>{o.current={},r.stopAllAction(),Object.values(i.actions).forEach(c=>{a&&r.uncacheAction(c,a)})}},[n]),i}function ca(n){const e=g.useRef(null),t=g.useRef(!1),s=g.useRef(!1),r=g.useRef(n);return g.useLayoutEffect(()=>void(r.current=n),[n]),g.useEffect(()=>{const o=e.current;if(o){const i=Ar(()=>(t.current=!1,!0)),a=o.onBeforeRender;o.onBeforeRender=()=>t.current=!0;const c=fr(()=>(t.current!==s.current&&(r.current==null||r.current(s.current=t.current)),!0));return()=>{o.onBeforeRender=a,i(),c()}}},[]),e}function la(n,e){const t=n+"Geometry";return g.forwardRef(({args:s,children:r,...o},i)=>{const a=g.useRef(null);return g.useImperativeHandle(i,()=>a.current),g.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),g.createElement("mesh",$({ref:a},o),g.createElement(t,{attach:"geometry",args:s}),r)})}const Ua=la("box"),La=g.forwardRef(({scale:n=10,frames:e=1/0,opacity:t=1,width:s=1,height:r=1,blur:o=1,near:i=0,far:a=10,resolution:c=512,smooth:l=!0,color:d="#000000",depthWrite:h=!1,renderOrder:u,...A},B)=>{const m=g.useRef(null),p=j(Q=>Q.scene),f=j(Q=>Q.gl),_=g.useRef(null);s=s*(Array.isArray(n)?n[0]:n||1),r=r*(Array.isArray(n)?n[1]:n||1);const[y,C,T,v,M,F,R]=g.useMemo(()=>{const Q=new me(c,c),H=new me(c,c);H.texture.generateMipmaps=Q.texture.generateMipmaps=!1;const oe=new Pn(s,r).rotateX(Math.PI/2),X=new Ze(oe),ae=new ei;ae.depthTest=ae.depthWrite=!1,ae.onBeforeCompile=V=>{V.uniforms={...V.uniforms,ucolor:{value:new Ce(d)}},V.fragmentShader=V.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),V.fragmentShader=V.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const _e=new ve(Yo),z=new ve(Xo);return z.depthTest=_e.depthTest=!1,[Q,oe,ae,X,_e,z,H]},[c,s,r,n,d]),x=Q=>{v.visible=!0,v.material=M,M.uniforms.tDiffuse.value=y.texture,M.uniforms.h.value=Q*1/256,f.setRenderTarget(R),f.render(v,_.current),v.material=F,F.uniforms.tDiffuse.value=R.texture,F.uniforms.v.value=Q*1/256,f.setRenderTarget(y),f.render(v,_.current),v.visible=!1};let I=0,S,P;return we(()=>{_.current&&(e===1/0||I<e)&&(I++,S=p.background,P=p.overrideMaterial,m.current.visible=!1,p.background=null,p.overrideMaterial=T,f.setRenderTarget(y),f.render(p,_.current),x(o),l&&x(o*.4),f.setRenderTarget(null),m.current.visible=!0,p.overrideMaterial=P,p.background=S)}),g.useImperativeHandle(B,()=>m.current,[]),g.createElement("group",$({"rotation-x":Math.PI/2},A,{ref:m}),g.createElement("mesh",{renderOrder:u,geometry:C,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},g.createElement("meshBasicMaterial",{transparent:!0,map:y.texture,opacity:t,depthWrite:h})),g.createElement("orthographicCamera",{ref:_,args:[-s/2,s/2,r/2,-r/2,i,a]}))});let Dt;const ha=new Uint8Array(16);function ua(){if(!Dt&&(Dt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Dt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dt(ha)}const Z=[];for(let n=0;n<256;++n)Z.push((n+256).toString(16).slice(1));function da(n,e=0){return Z[n[e+0]]+Z[n[e+1]]+Z[n[e+2]]+Z[n[e+3]]+"-"+Z[n[e+4]]+Z[n[e+5]]+"-"+Z[n[e+6]]+Z[n[e+7]]+"-"+Z[n[e+8]]+Z[n[e+9]]+"-"+Z[n[e+10]]+Z[n[e+11]]+Z[n[e+12]]+Z[n[e+13]]+Z[n[e+14]]+Z[n[e+15]]}const Aa=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),In={randomUUID:Aa};function wa(n,e,t){if(In.randomUUID&&!e&&!n)return In.randomUUID();n=n||{};const s=n.random||(n.rng||ua)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let r=0;r<16;++r)e[t+r]=s[r];return e}return da(s)}const fa=g.forwardRef(({children:n,compute:e,width:t,height:s,samples:r=8,renderPriority:o=0,eventPriority:i=0,frames:a=1/0,stencilBuffer:c=!1,depthBuffer:l=!0,generateMipmaps:d=!1,...h},u)=>{const{size:A,viewport:B}=j(),m=Gt((t||A.width)*B.dpr,(s||A.height)*B.dpr,{samples:r,stencilBuffer:c,depthBuffer:l,generateMipmaps:d}),[p]=g.useState(()=>new ti),f=g.useCallback((_,y,C)=>{var T,v;let M=(T=m.texture)==null?void 0:T.__r3f.parent;for(;M&&!(M instanceof dt);)M=M.__r3f.parent;if(!M)return!1;C.raycaster.camera||C.events.compute(_,C,(v=C.previousRoot)==null?void 0:v.getState());const[F]=C.raycaster.intersectObject(M);if(!F)return!1;const R=F.uv;if(!R)return!1;y.raycaster.setFromCamera(y.pointer.set(R.x*2-1,R.y*2-1),y.camera)},[]);return g.useImperativeHandle(u,()=>m.texture,[m]),g.createElement(g.Fragment,null,mr(g.createElement(ma,{renderPriority:o,frames:a,fbo:m},n,g.createElement("group",{onPointerOver:()=>null})),p,{events:{compute:e||f,priority:i}}),g.createElement("primitive",$({object:m.texture},h)))});function ma({frames:n,renderPriority:e,children:t,fbo:s}){let r=0,o,i;return we(a=>{(n===1/0||r<n)&&(o=a.gl.autoClear,i=a.gl.xr.enabled,a.gl.autoClear=!0,a.gl.xr.enabled=!1,a.gl.setRenderTarget(s),a.gl.render(a.scene,a.camera),a.gl.setRenderTarget(null),a.gl.autoClear=o,a.gl.xr.enabled=i,r++)},e),g.createElement(g.Fragment,null,t)}const pa=sa({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new ie},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <${$n>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Sa=g.forwardRef(({children:n,events:e=void 0,blur:t=0,eventPriority:s=0,renderPriority:r=0,worldUnits:o=!1,resolution:i=512,...a},c)=>{As({PortalMaterialImpl:pa});const l=g.useRef(null),{scene:d,gl:h,size:u,viewport:A,setEvents:B}=j(),m=Gt(i,i),[p,f]=g.useState(0);we(()=>{const v=l.current.blend>0?Math.max(1,r):0;p!==v&&f(v)}),g.useEffect(()=>{e!==void 0&&B({enabled:!e})},[e]);const[_,y]=g.useState(!0),C=ca(y);g.useLayoutEffect(()=>{var v;C.current=(v=l.current)==null?void 0:v.__r3f.parent},[]),g.useLayoutEffect(()=>{if(C.current&&t&&l.current.sdf===null){const v=new Ze(C.current.geometry,new Ye),M=new bt().setFromBufferAttribute(v.geometry.attributes.position),F=new ft(M.min.x*(1+2/i),M.max.x*(1+2/i),M.max.y*(1+2/i),M.min.y*(1+2/i),.1,1e3);F.position.set(0,0,1),F.lookAt(0,0,0),h.setRenderTarget(m),h.render(v,F);const x=Ca(i,i,h)(m.texture),I=new Float32Array(i*i);h.readRenderTargetPixels(x,0,0,i,i,I);let S=1/0;for(let P=0;P<I.length;P++)I[P]<S&&(S=I[P]);S=-S,l.current.size=S,l.current.sdf=x.texture,h.setRenderTarget(null)}},[i,t]),g.useImperativeHandle(c,()=>l.current);const T=g.useCallback((v,M,F)=>{var R;if(!C.current)return!1;if(M.pointer.set(v.offsetX/M.size.width*2-1,-(v.offsetY/M.size.height)*2+1),M.raycaster.setFromCamera(M.pointer,M.camera),((R=l.current)==null?void 0:R.blend)===0){const[x]=M.raycaster.intersectObject(C.current);if(!x)return M.raycaster.camera=void 0,!1}},[]);return g.createElement("portalMaterialImpl",$({ref:l,blur:t,blend:0,resolution:[u.width*A.dpr,u.height*A.dpr],attach:"material"},a),g.createElement(fa,{attach:"map",frames:_?1/0:0,eventPriority:s,renderPriority:r,compute:T},n,g.createElement(Ba,{events:e,rootScene:d,priority:p,material:l,worldUnits:o})))});function Ba({events:n=void 0,rootScene:e,material:t,priority:s,worldUnits:r}){const o=j(h=>h.scene),i=j(h=>h.setEvents),a=Gt(),c=Gt();g.useLayoutEffect(()=>{o.matrixAutoUpdate=!1},[]),g.useEffect(()=>{n!==void 0&&i({enabled:n})},[n]);const[l,d]=g.useMemo(()=>{const h={value:0};return[new Qe(new ve({uniforms:{a:{value:a.texture},b:{value:c.texture},blend:h},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <tonemapping_fragment>
            #include <${$n>=154?"colorspace_fragment":"encodings_fragment"}>
          }`})),h]},[]);return we(h=>{var u;let A=t==null||(u=t.current)==null?void 0:u.__r3f.parent;if(A){if(r)o.matrixWorld.identity();else{var B;s&&((B=t.current)==null?void 0:B.blend)===1&&A.updateWorldMatrix(!0,!1),o.matrixWorld.copy(A.matrixWorld)}if(s){var m,p,f;((m=t.current)==null?void 0:m.blend)>0&&((p=t.current)==null?void 0:p.blend)<1?(d.value=t.current.blend,h.gl.setRenderTarget(a),h.gl.render(o,h.camera),h.gl.setRenderTarget(c),h.gl.render(e,h.camera),h.gl.setRenderTarget(null),l.render(h.gl)):((f=t.current)==null?void 0:f.blend)===1&&h.gl.render(o,h.camera)}}},s),g.createElement(g.Fragment,null)}const Ca=(n,e,t)=>{let s=new me(n,e,{minFilter:_s,magFilter:At,type:Rt,format:St,generateMipmaps:!0}),r=new me(n,e,{minFilter:W,magFilter:W}),o=new me(n,e,{minFilter:W,magFilter:W}),i=new me(n,e,{minFilter:W,magFilter:W}),a=new me(n,e,{minFilter:W,magFilter:W}),c=new me(n,e,{minFilter:W,magFilter:W,type:Rt,format:St}),l=new me(n,e,{minFilter:W,magFilter:W,type:Rt,format:St});const d=new Qe(new ve({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),h=new Qe(new ve({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),u=new Qe(new ve({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/n}, ${1/e}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),A=new Qe(new ve({uniforms:{tex:{value:null},size:{value:new ie(n,e)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),B=new Qe(new ve({uniforms:{inside:{value:l.texture},outside:{value:c.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return m=>{let p=s;m.minFilter=W,m.magFilter=W,d.material.uniforms.tex.value=m,t.setRenderTarget(r),d.render(t);const f=Math.ceil(Math.log(Math.max(n,e))/Math.log(2));let _=r,y=null;for(let C=0;C<f;C++){const T=Math.pow(2,f-C-1);y=_===r?i:r,u.material.uniforms.level.value=C,u.material.uniforms.maxSteps.value=f,u.material.uniforms.offset.value=T,u.material.uniforms.tex.value=_.texture,t.setRenderTarget(y),u.render(t),_=y}t.setRenderTarget(c),A.material.uniforms.tex.value=y.texture,A.render(t),h.material.uniforms.tex.value=m,t.setRenderTarget(o),h.render(t),_=o;for(let C=0;C<f;C++){const T=Math.pow(2,f-C-1);y=_===o?a:o,u.material.uniforms.level.value=C,u.material.uniforms.maxSteps.value=f,u.material.uniforms.offset.value=T,u.material.uniforms.tex.value=_.texture,t.setRenderTarget(y),u.render(t),_=y}return t.setRenderTarget(l),A.material.uniforms.tex.value=y.texture,A.render(t),t.setRenderTarget(p),B.material.uniforms.tex.value=m,B.render(t),t.setRenderTarget(null),p}};export{Ua as B,ba as C,Ga as G,ya as H,Da as K,Ta as L,Sa as M,Oa as T,ri as _,Ht as a,Ra as b,Ha as c,La as d,Ma as e,Is as f,Fa as g,Ia as h,va as u,wa as v};
